(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/worker_index/worker_index"],{219:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var a=o(n(220));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},220:function(t,e,n){"use strict";n.r(e);var o=n(221),a=n(223);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n(225);var r,s=n(36),l=Object(s["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,"3656f8b4",null,!1,o["components"],r);l.options.__file="pages/worker_index/worker_index.vue",e["default"]=l.exports},221:function(t,e,n){"use strict";n.r(e);var o=n(222);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},222:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));try{o={uNavbar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(n.bind(null,422))},uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,430))},uSticky:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-sticky/u-sticky")]).then(n.bind(null,438))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,446))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.ifSingle?null:t.selectedWorkType.length),o=t.ifSingle?null:t.jobList.length,a=t.ifSingle?null:t.__map(t.jobList,(function(e,n){var o=t.__get_orig(e),a=t.jobList.length,i=a&&e.min_salary==e.max_salary?Math.floor(e.max_salary):null,r=a&&e.min_salary!=e.max_salary?Math.floor(e.min_salary):null,s=a&&e.min_salary!=e.max_salary?Math.floor(e.max_salary):null,l=a?t.period.filter((function(t){return t.value==e.salary_type})):null,c=a?e.highlight&&0!=e.highlight.length:null;return{$orig:o,g2:a,g3:i,g4:r,g5:s,g6:l,g7:c}})),i=t.ifSingle?null:t.__map(t.allList,(function(e,n){var o=t.__get_orig(e),a=t.jobList.length,i=a?null:t.period.filter((function(t){return t.value==e.salary_type})),r=a?null:e.highlight&&0!=e.highlight.length;return{$orig:o,g8:a,g9:i,g10:r}}));t.$mp.data=Object.assign({},{$root:{g0:n,g1:o,l0:a,l1:i}})},i=!1,r=[];a._withStripped=!0},223:function(t,e,n){"use strict";n.r(e);var o=n(224),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},224:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(30)),i=o(n(18)),r=o(n(32)),s=o(n(11)),l=o(n(194)),c=n(41);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=function(){n.e("components/broadcast").then(function(){return resolve(n(205))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/login").then(function(){return resolve(n(454))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/worker_tabbar").then(function(){return resolve(n(461))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/custom_cascade").then(function(){return resolve(n(468))}.bind(null,n)).catch(n.oe)},p=getApp(),m={data:function(){return{showBroadcast:!1,canPlay:!0,showCascade:!1,period:l.default.periodList,currentIndex2:0,tab_2_list:[{value:"recomm",label:"推荐"},{value:"near",label:"附近"}],currentIndex:0,selectedWorkType:[{value:"",label:"全部"}],allList:[],jobList:[],ifSingle:1154==p.globalData.scene,btnStatus2:!0,showMask:!1,showLogin:!1,avatar:p.globalData.baseImageUrl+"/broker/com_default.png",imgUrl:p.globalData.baseImageUrl,pageName:"灵动优聘",marginTop:p.globalData.marginTop,mainTabHeight:p.globalData.mainTabHeight,subTabHeight:p.globalData.subTabHeight,tabMargin:p.globalData.tabMargin,bannerHeight:p.globalData.bannerHeight,tabs:l.default.requireStatus,currentTab:{value:"",text:"全部"},list:[],scrollHeight:0,boxTop:0,headerHeight:p.globalData.highTopHeight,currentPage:1,allCurrentPage:1,pagination:{},allPagination:{},tabbarHeight:0,periodList:l.default.periodList,orderInfo:{available_amount:"",need_pay:""},swiperList:["https://static.test.swiftwd.com/worker/v_list/index_banner01.png"],currentRecord:{},systemHeight:p.globalData.systemHeight,position:null,getNear:!1}},components:{tabbar:f,login:h,customCascade:b,broadcast:d},computed:g({},(0,c.mapState)(["workType"])),onLoad:function(){var e=this;return(0,r.default)(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.boxTop=e.marginTop+e.bannerHeight+3*e.tabMargin+e.subTabHeight,e.scrollHeight=p.globalData.systemHeight-e.marginTop-e.subTabHeight-3*e.tabMargin-e.tabbarHeight-e.bannerHeight,o=t.getStorageSync("cascadeShow")?t.getStorageSync("cascadeShow"):"",o?e.showBroadcast=!0:e.showSelect(),n.next=6,e.getPosition();case 6:e.position=n.sent,console.log(e.position),e.getList(),e.getSelectWorkTypes();case 10:case"end":return n.stop()}}),n)})))()},onReachBottom:function(){0==this.jobList.length?this.getAllMore():this.getMore()},onShow:function(){console.log("ifSingle",this.ifSingle),this.ifSingle||this.isLogin()},methods:{showSelect:function(){this.showCascade=!0},sendBtnMsg:function(e){console.log(e),t.navigateTo({url:"/worker/worker_chat/worker_chat?b_id="+e.job_id+"&b_type="+e.type+"&b_msg="+e.msg+"&b_action="+(e.action?e.action:"")})},closeBroadcast:function(){this.showBroadcast=!1,this.canPlay=!1},changeSubTab:function(t,e){this.currentIndex2=e,"near"==t.value?this.getNear=!0:this.getNear=!1,this.getList()},getSelectWorkTypes:function(){var t=this;this.$request("/worker/expected-job-types").then((function(e){if(0==e.code){var n=[{value:"",label:"全部"}];t.selectedWorkType=n.concat(e.data)}}))},cancelCascade:function(){this.showCascade=!1},handleTabClick:function(t){this.currentTab=t,this.currentPage=1,this.getList()},handleConfirm:function(t){var e=this;console.log(t);var n={job_types:(0,i.default)(t)};this.$request("/worker/expected-job-types",n,"PUT").then((function(t){0==t.code&&(e.getSelectWorkTypes(),e.showCascade=!1)}))},makePhoneCall:function(){this.$store.dispatch("makePhoneCall")},getList:function(){var t=this,e=this.getNear?this.position.location.lat:"",n=this.getNear?this.position.location.lng:"",o="/guest/recommend-jobs?page=1&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude="+e+"&longitude="+n;this.$request(o).then((function(e){0==e.code&&(t.jobList=e.data.list,t.pagination=e.data.pagination,0==t.jobList.length&&t.getAll())}))},getAll:function(){var t=this,e=this.getNear?this.position.location.lat:"",n=this.getNear?this.position.location.lng:"",o="/guest/recommend-jobs?page=1&keyword=&crowd_sourcing_job_type_code=&latitude="+e+"&longitude="+n;this.$request(o).then((function(e){0==e.code&&(t.allList=e.data.list,t.allPagination=e.data.pagination)}))},getAllMore:function(){var e=this,n=this.getNear?this.position.location.lat:"",o=this.getNear?this.position.location.lng:"";if(this.allCurrentPage<this.allPagination.page_count){this.allCurrentPage++;var a="/guest/recommend-jobs?page="+this.allCurrentPage+"&keyword=&crowd_sourcing_job_type_code=&latitude="+n+"&longitude="+o;this.$request(a).then((function(t){0==t.code&&(e.allList=e.allList.concat(t.data.list),e.allPagination=t.data.pagination)}))}else t.showToast({title:"已加载全部",icon:"none"})},closeLogin:function(){this.showLogin=!1},getTabbarHeight:function(t){this.tabbarHeight=t},toDetail:function(e){t.navigateTo({url:"/worker/work_detail/work_detail?id="+e.id})},getPosition:function(){var t=this;return new Promise((function(e,n){t.$request("/guest/location").then((function(t){0==t.code&&e(t.data)}))}))},getMore:function(){var e=this,n=this.getNear?this.position.location.lat:"",o=this.getNear?this.position.location.lng:"";if(this.currentPage<this.pagination.page_count){this.currentPage++;var a="/guest/recommend-jobs?page="+this.currentPage+"&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude="+n+"&longitude="+o;this.$request(a).then((function(t){0==t.code&&(e.jobList=e.jobList.concat(t.data.list),e.pagination=t.data.pagination)}))}else t.showToast({title:"已加载全部",icon:"none"})},clickFengling:function(){this.showBroadcast=!0,this.canPlay=!0},closeMask:function(){this.showMask=!1}}};e.default=m}).call(this,n(2)["default"])},225:function(t,e,n){"use strict";n.r(e);var o=n(226),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},226:function(t,e,n){}},[[219,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/worker_index/worker_index.js.map