{"version":3,"sources":["uni-app:///main.js","webpack:///E:/项目文件/发薪平台/youpin_list_v1.0/subpkg/index/index.vue?b4b0","webpack:///E:/项目文件/发薪平台/youpin_list_v1.0/subpkg/index/index.vue?3791","webpack:///E:/项目文件/发薪平台/youpin_list_v1.0/subpkg/index/index.vue?5b6f","webpack:///E:/项目文件/发薪平台/youpin_list_v1.0/subpkg/index/index.vue?f80f","uni-app:///subpkg/index/index.vue","webpack:///E:/项目文件/发薪平台/youpin_list_v1.0/subpkg/index/index.vue?c642"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uNavbar","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","showBroadcast","showUserStep","showProPop","showFlMask","canPlay","greetingObj","logo","title","content","showLoading","showSend","newUser","ifSingle","menuButtonInfo","marginTop","maskStartPoint","maskEndPoint","showMenu","manager","menuList","text","url","icon","value","imgUrl","list4","name","currentTabIndex","statusBarHeight","botSafe","userInfo","is_vip","showVoice","inputing","voicePermisson","showLogin","shareId","params","openid","cancelRecord","touchStartTime","touchEndTime","secondTimer","num","hold","question","qaList","currentQalength","curRespone","origin","msg_type","card","responseStr","responCount","prinTimer","historyList","historyId","loadAllHistory","inputHeight","chatScrollHeight","btnInfo","bodyStartPoint","bodyEndPoint","moveDirection","printTimer1","printTimer2","printTimer3","hasChannel","scrollStr","jobId","noMayAsk","greetingReady","action","currentProjectDetail","id","worker_salary_min","worker_salary_max","worker_salary_type","pro_id","pro_name","loadWorkInfo","workReady","loadParams","computed","indexReady","uni","sendAdWork","job_id","msg","onLoad","frontColor","backgroundColor","_this","scanId","readStep","success","showCancel","fail","commonMethods","location","onUnload","onShow","pages","currentPage","fullPath","urlParamStr","token","onHide","app","mounted","login","welcome","chat","asideUserCenter","broadcast","watch","ad_tracking_id","handler","deep","methods","handleLogin","closeBroadcast","setScrollHeight","backHome","closeStep","getProjectDetail","resolve","onInput","openCanPlay","closeProPop","toCall","duration","status","scope","confirmText","complete","listenKeyBoard","height","handleChannelStatus","clickFengling","closeFengling","getPosition","printResponse","index","clearInterval","getMayAsk","obj","setGreetStatus","handleConnectErr","printStr","jobs","may_ask","getHistory","newArr","getMoreHistory","setTimeout","handleList","arr","bodyTouchStart","bodyTouchEnd","bodyTouchMove","navigate","sendBtnMsg","strArr","random","inputBindFocus","initRecord","handleRecorder","tempFilePath","filePath","mergedArray","offset","voice","media","key","second","anmitionPlay","showTranIcon","showTranlate","showTransing","stringToUint8Array","send","param","creatConnect","res","connectWebsocket","header","method","initWebsocket","type","getWorkInfo","getQrcode","doSend","sendQuestion","handleTouchMove","noInput","resetData","close","startRecord","lang","getSetting","stopRecord","cancelVoice","changeTab","openSetting","changeChatMethod","maskStart","maskEnd","handleMaskMove","closeMenu","openMenu","closeLogin","getSignList","getViewList","getInfo"],"mappings":"6IAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,yBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,sHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCjCvB,yHAAioB,eAAG,G,kKCqGpoB,YACA,WACA,QAGA,otCACA,aACA,CACAC,gBACA,OACAC,iBACAC,gBACAC,cACAC,cACAC,WACAC,aACAC,+DACAC,yBACAC,+DAEAC,eACAC,YACAC,WACAC,kCACAC,2CACAC,iCACAC,kBACAC,gBACAC,YACAC,6BACAC,WACAC,aACAC,sCACAC,QACAC,WAEA,CACAH,cACAC,sCACAC,QACAC,aAoBA,CACAH,YACAC,0BACAC,wBACAC,UACA,CACAH,YACAC,OACAC,wBACAC,WAGAC,iCACAC,QACAC,WACA,CACAA,YAMAC,kBACAC,6CACAC,UACAC,UACAC,WAEAC,aACAC,YACAC,kBACAC,aACAC,WACAC,YACAC,UACAC,gBACAC,kBACAC,gBACAC,iBACAC,MACAC,UACAC,YACAC,UACAC,kBACAC,YACAxC,WACAyC,YACAC,gBACAC,WAEAC,eACAC,cACAC,eACAC,eACAC,YACAC,kBACAC,cACAC,mBACAC,aACAC,oBACAC,kBACAC,iBACAC,iBACAC,iBACAC,iBACAC,cACAC,aACAC,SACAC,YACAC,iBACAC,UACAC,sBACAC,MACAhD,QACAiD,qBACAC,qBACAC,uBAEAC,UACAC,YACAC,kBACAC,aACAC,kBAGAC,iBACA,0GACA,+FACA,iCACA,IACAC,sBAIA,OAHA,cACAC,gBAEA,cAQAC,sBAGA,GAFAnG,+CACAA,mDACA,8BACA,OACAoG,oCACA7D,oCACA8D,yEACA,qEACA,iBAEA,mBAEA,uCAGAC,mBAAA,gJACA,4DAeA,GAZAJ,yBACAK,qBACAC,gCAEAC,EAEAzG,wBACA,eAEA0G,uDACA,sCACA,WACAC,gEACAzD,UAAA,gBAGA,OADAgD,gCACA,uBACA,mFAGA,WACAA,gCACA,cAOA,QAqCA,OAhCA,cACA,uBAEAA,kBACAU,oBACA,kCAEAV,aACA9E,gCACAyF,iBAIAC,iBACA9G,8BAIAkG,mCAAA,0HACAlG,kDACA,iCAEAkG,aACA9E,gCACAyF,iBAGAX,YACAhE,4BAEAgE,4BACA,2CACA,mDAdAA,IAcA,UACAa,4CAAA,QAIA,OAJA,iBACA,YACA,kDACA,uDACA,UACA,wBACA,GADAC,SACA,iBACA9D,cAAA,gBACA,mCACA,sDAGA,eAEA,cACA,iBACA,aACA,2CAxFA,IA0FA+D,oBACAjH,2BACA,gBACA,cAEAkH,kBAAA,sJACA,4DAaA,GAVAT,IACA,mBACAU,oBACAC,gBACAC,mBACAC,2CACA,GACAtH,6BAGAuH,uDACA,qCACA,0CACA,sDAQA,GALA,eAKArB,2CAEA,sCACA,+BACA,4CACA,wBACAO,8BACA,2CAhCA,IAmCAe,kBAEAC,0BACAA,6BACAA,8BACAA,6BACAA,8BACA,gBACAvB,gDAEAwB,qBACA/H,YACAgI,QACAC,UACAC,OACAC,kBACAC,aAEAC,OACAxF,8BAAA,WACA,OAkBA,GAjBA,OAEA,gBACA,eACA,MACA,2BACAiE,8BAKA,mBAGA,OACA,iBAEA,6BACA,qBACA,OACAwB,oCAEA,gEACA,YACAjI,oBACA,2BAOA0D,qBAIA,gBAHA,GAMAmC,cACAqC,sBAEA,iBAIAC,UAGAC,gBACA,iGACA,wFACA,8FACA,uFACA,+FACA,8FACA,kFACA,6DACA,IACAC,uBACA,oBACA,gBAEAC,0BACA,sBACA,iBAEAC,2BACA,gEAEAC,oBACA,wBASAC,qBACA,sBAEAC,4BACA,WACA,gCACA,wCACAjC,gCACA,WACAkC,iBAMAC,oBACA,8BAKAC,uBACA,iBAEAC,uBACA,mBACA,gCACA,mCAEAC,mBACA,iBAQA,uCAOA,OANA7C,aACA9E,gBACAe,aACA6G,oBAEA,wBAGA,SACA,KACA,IAEAC,SACA7C,YAEA,WACA,eAEAF,aACAgD,qBACAtC,oBACAH,oBACAA,aACAP,cACAhE,8DAGA4E,iBAEAL,oBACAA,2BACArF,oBACAyF,cACAsC,iBACAvC,oBACA,cACAV,eACAU,oBACA,gCACAH,oBACAA,aACAP,cACAhE,4CACA+G,mBAIAnC,iBACAL,2BAOA2C,oBACAlD,oCAKA,uBArEAA,aACA9E,gBACAe,aACA6G,gBAqEAK,2BACA,aACA,mBACA,gEAEA,0EACAC,OACA,wBAGAC,gCACA,mBAEAC,yBACA,sBACA,iBAEAC,yBACA,oBAEAC,uBAAA,WACA,kCACA,gDACA,WACAf,iBAKAgB,yBACA,WACA,IAEA,uCACA,2BACA,KACAlD,uCACA,YACAA,oCAGA,UACAA,gDAIAmD,KAEA,cACA,oBACAnD,+BAEAoD,2BACApD,gBACAA,cACAA,2BAuBA,KAGAqD,qBAAA,WAEA,GACA,+BAEA,IACA,KACA9J,yBACA,4EACA,aAEA4J,2BACAG,qBACAA,sBACA,2BAEAH,oBACAG,cACAA,sBACA,0BAKAC,0BACA,uBAEAC,4BAEA,yBACA,6CACA,sBACA,mBACA,2BACA,iBACAJ,8BAEA,OACAxI,2CACA6I,YACAnG,gBACAD,YACAqG,QACAC,YAEA,sBAIAC,sBACA,WAEA,OADArK,sBACA,yBACA,4EACAyG,2CACA,cACA,iBAEAA,aAEAA,aAEA,uBACA,gBACA,MACAA,0BAEA6D,kBACA3B,aAMA4B,0BAAA,WACA,OACA,uBA8BArE,aACA9E,cACAe,YACA6G,eAEAwB,uBACA/D,mCACA,SArCA,CACA,oBACA,uCAEA,YADA,oCAGA,eAGAP,gBACA,+EACA,qCACA,cACA,oBAGA,GAFAA,gBACA,iCACA,KACA,uBACA,kBACA,sCACA,iCACA,8BAEA,yBAGA,sCAiBAuE,uBAEA,IADA,eACA,YACA,yBAEAC,2BACAA,qBACAA,sBAGA,UAEAC,2BACA,kCAEAC,yBACA,2BACA,0CACA,uBAEA,6BACA,wBACA,uBAGA,uBAEAC,0BACA,wEAGA,2BAGA,wEAEA,6BAIAC,qBACA5E,cACAhE,kCAGA6I,uBAAA,8IAMA,GALA/K,gCACAyG,IACA,WACA,mCACA,oCAEA,4BACA,mDAGA,0BAKA,OAJAP,aACA9E,gBACAe,aACA6G,eACA,8BAIA,kCAKA,OAJA9C,aACA9E,gBACAe,aACA6G,eACA,2BAGA,gBACA,iBACA,kBACA,eAEAgC,KACAA,sBACAA,kCACAA,mCACAA,kCACAA,iCACAC,qCACA,iBAEA,iBAEA,sBACA,oBACAT,uBACA/D,mBACA,MAEA,iBACA,2CAnDA,IAsDAyE,2BACA,gBAIA,uBACA,kBACA,mCALA,mBAQAC,sBAAA,WAEA,kCACA,iBAGA,iCACA,QACA,cACAtB,6BACA,oCACA,oBAEA3D,aACA9E,eACAe,kBAKA,kCACA,QACA,cACA0H,iCAIAuB,2BAGA,IAFAC,iBACArC,aAEA,iBACA,WACA,MACA9C,aACA9E,eACAe,aACA6G,eAKA,kBAiDA,qBAhDA9J,mCACAoM,WACA1E,oBAEA,aACA,oBACA,uBACA,+BAGA,oDAGA,oBAEA,oBAEA,IACA2E,WACAC,YAEAD,WAEA,OACAhG,KACAlE,WACAyC,kBACAC,iBACA0H,OACAC,OACAC,OACAzJ,OAEA0J,aACAC,iBAEAC,gBACAC,gBACAC,iBAEAvF,4BAGAK,iBACA9G,+BAUAiM,+BAIA,IAHA,sCACA,WACA,oBACA,YACAvB,qBAEA,UAEAwB,qBACA,WACA,aASA,oCACA,8BACA9K,yBACAyF,cACAsC,mBAIA,eAIA,4BACAjD,gBAEA,iBAEA,kBAEA,iBACAuB,8BACA7G,kCACA,UACA,kBACA,eACA,uBAEAgG,oBACAH,6BACAA,+BACAA,oBACAA,eACAA,WACAA,YACAA,cACAA,uBACAA,8BACAA,wBACAP,gBACA,YACA,iBACAO,kBACA0F,cACA1F,mCACAA,QACAA,iBACAA,oBAOAK,iBACAL,WACAA,6BACAA,mCAhEAP,aACA9E,gBACAe,aACA6G,gBAmEAoD,wBAAA,4IAaA,GAZA3F,IACA,UACA,kCACA,8BACA,mEACA,qEACA,kDACA,mEACA,+EACA,0EACAd,oBACAA,YAEA8B,yBAAA,+BAEA,2CACA,UAEA,GAAAzH,uCACA,qEACA,UAGA,mCACA,qCAAAqM,SACA,8BACA,kBACA,2CA5BA,IA8BAC,6BACA,WACA,oBACA,gBAOA,OANA,6BACApG,eACA9E,iBAIA,yBACAqG,yCACAvF,wBACAqK,SACAC,aACA5F,oBACA+B,MAEA7B,iBACA9G,sBACAyG,2BACArF,eACAyF,uBAOA4F,yBAAA,WACA,OACAhF,4CACA,iBACA,iBACA,mBACA,wBACA,gBACA,eACA,+CACAhB,iBAEAzG,kCAEAyH,6CACAA,6BACAoC,uBACA,mBACA,wBACA,gBACA,iBACA,kBACA,gCACA,qBAEAW,uBACA/D,mBACA,QAEAgB,+CACA,mBACA,wBACAhB,uBACAA,mBACA,yBAEA,YAEA,sCAEAA,uCAEAA,qBAGAA,sBAMA,mBACAA,mBAGA,oBACAA,6BAEAA,eACAA,gBACAA,cACAA,6BAGA,CACA,oBAEA,OACAiG,cAEAjG,gDAEA,+BAEA,OACAiG,yBAEAjG,yBACAA,gDAEA,sBAEA,OACAiG,gBAEAjG,yBACAA,qBACAA,gDAEA,qBACAA,gBACAA,yBACA,mBACAA,kCACAA,kBACA,iBACAA,yBAIAA,eACA,eACAA,mBAKAgB,6CAEAzH,yBACAyH,6BACA,gBACA,iBACA,iBAEAoC,uBACAW,uBACA/D,mBACA,MACA,gCACA,yBAKAkG,uBAAA,WACA,OACA,0CACA,gCACA,gCACA,YACAzG,gBACAO,eACAkC,kBAKAiE,sBAAA,WACA,MAGA,2DACA,mCACA,WACA,qCAIAC,qBACA,0BAEA,yBAGA,QAEA,oBAEAhN,qBAIAiN,wBAEA,kBAGA,mBACA,OACAzL,sBACAyC,kBACAC,iBAGA,gCAGAgJ,4BACA,iBAKA,6DAEA,oBADA,IAOAC,mBACA,WACA,mCACA,aACAvG,kBACA,MAEAwG,qBACA,qBACA,iBACA5L,WACAyC,YACAC,gBACAC,WAEA,mBACA,oBACA,mBAEAkJ,iBACA,gCACA,yBACAzF,oCAIA0F,wBACA,WACA,eAIA,aAQA,cASA,uBAEA,eAGA1G,6BACAA,+BACAP,gBACAU,uBAEAH,kBACAA,iBACAuC,aACAoE,iBArBAlH,aACA9E,gBACAe,aACA6G,eAXA9C,aACA9E,gBACAe,aACA6G,eAPA,mBAoCAqE,sBACA,WACAnH,cACAU,oBACA,8BAIAH,oBAHAA,qBAOAK,sBAGAwG,uBACA,WACA,iBACA,8BACA,0CACA,oBAEA9C,uBACA/D,mBACA,MAIA8G,wBACA,iBAEA,qBAGAC,sBACA,eACA,uBAEA,mBAIAC,uBACA,mBAIA,WACA,gCACA,EACAvH,eACAU,oBACA,gCACAH,oBACAA,iBAGAK,iBACAL,uBAIAP,aACAgD,qBACAtC,oBACAH,oBACAA,gBAEAK,iBAEAL,qBAEA2C,oBACAlD,yCA7BA,mBAoCAwH,4BACA,gBAIA,uBACA,eASA,kBANA,oBAGA,kBAFA,oBARA,mBAkBAC,sBACA,kCAEAC,sBAGAC,2BAGA,sEACA,kBAGAC,qBACA,kBAEAC,oBAEA,gBAEA,iBACA,mBACA,mBACA,gBAGA,mBAIAC,sBACA,mBAEAC,uBAAA,WACA,+CACA,mCACA,YACA,+DAIAC,uBAAA,WACA,sCACA,mCACA,YACA,2DAIAC,oBAAA,0IAgBA,OAfA,0DACA,YAEAjI,oDACA,sBAIA,wCACA6D,GACA2C,WACArG,sEAEA,iBAEA,uBACA,qFAjBA,OAoBA,c,6ECljDA,yHAAwrC,eAAG,G","file":"subpkg/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=f8b49f40&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=f8b49f40&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-navbar/u-navbar\" */ \"@/uni_modules/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"single_page\" v-if=\"ifSingle\">\r\n\t\t<image :src=\"imgUrl+'/worker/single_page.png'\" mode=\"widthFix\" style=\"width: 100%;\"></image>\r\n\t</view>\r\n\t<view class=\"home_page body_bg\" v-else @touchstart=\"bodyTouchStart\" @touchmove=\"bodyTouchMove\"\r\n\t\t@touchend=\"bodyTouchEnd\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<u-navbar :safeAreaInsetTop=\"true\" bgColor=\"rgba(255, 255, 255, 0.25)\">\r\n\t\t\t<view class=\"u-nav-slot flex flex-start\" slot=\"left\">\r\n\t\t\t\t<view class=\"ic_menu\" @click=\"openMenu\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_menu.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tabs flex flex-start\">\r\n\t\t\t\t\t<view class=\"tab\" v-for=\"(item,index) in list4\" :class=\"currentTabIndex==index?'active':''\"\r\n\t\t\t\t\t\t@click.stop=\"changeTab(index)\">\r\n\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-navbar>\r\n\t\t<view class=\"main_box\">\r\n\t\t\t<!-- 风铃页 -->\r\n\t\t\t<welcome ref=\"welcome\" v-show=\"currentTabIndex == 0\" :top=\"statusBarHeight+44\" :bottom=\"botSafe\"\r\n\t\t\t\t:canPlay=\"canPlay\" :showUserStep=\"showUserStep\" @sendMsg=\"sendBtnMsg\" @openCanPlay=\"openCanPlay\"\r\n\t\t\t\t@setGreetStatus=\"setGreetStatus\" @tocall=\"toCall\" @closeStep=\"closeStep\">\r\n\t\t\t</welcome>\r\n\t\t\t<chat ref=\"chatRef\" v-show=\"currentTabIndex == 1\" :top=\"statusBarHeight+44\" :bottom=\"botSafe\"\r\n\t\t\t\t:historyList=\"historyList\" :qaList=\"qaList\" :scrollHeight=\"chatScrollHeight\" :answering=\"answering\"\r\n\t\t\t\t:greetingObj=\"greetingObj\" :answerContinue=\"answerContinue\" :scrollStr=\"scrollStr\" @sendMsg=\"sendBtnMsg\"\r\n\t\t\t\t@moreHis=\"getMoreHistory\" @tocall=\"toCall\" @setScrollHeight=\"setScrollHeight\">\r\n\t\t\t</chat>\r\n\t\t\t<!-- 频道页 -->\r\n\t\t\t<channel :top=\"statusBarHeight+44\" :bottom=\"botSafe\" v-show=\"currentTabIndex == 2\"\r\n\t\t\t\t@handleChannelStatus=\"handleChannelStatus\"></channel>\r\n\t\t</view>\r\n\t\t<asideUserCenter @closeMenu=\"closeMenu\" @backHome=\"backHome\" :userInfo=\"userInfo\" :menuList=\"menuList\"\r\n\t\t\t:showMenu=\"showMenu\">\r\n\t\t</asideUserCenter>\r\n\r\n\t\t<view class=\"input_btn_wrap\"\r\n\t\t\t:style=\"{bottom:inputHeight?inputHeight+10+'px':'65rpx',background:inputing?(cancelRecord?'#fe697f':'#216ff9'):'#fff'}\"\r\n\t\t\t:class=\"inputHeight?'upper':''\" v-show=\"currentTabIndex !== 2\">\r\n\t\t\t<view>\r\n\t\t\t\t<!-- 风铃icon -->\r\n\t\t\t\t<view class=\"fl_icon\" @click.stop=\"clickFengling\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_fengling.png'\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<!-- 语音按钮区 -->\r\n\t\t\t\t\t<view class=\"voice_btn_wrap\" v-show=\"showVoice && voicePermisson\" @touchstart.stop=\"startRecord\"\r\n\t\t\t\t\t\t@touchend.stop=\"stopRecord\" @touchmove.stop=\"handleTouchMove\" @touchcancel.stop=\"cancelVoice\">\r\n\t\t\t\t\t\t<view v-show=\"!inputing\">{{canSend?\"按住 说话\":\"正在努力思考，请稍后\"}}</view>\r\n\t\t\t\t\t\t<view class=\"voice_inputing\" v-show=\"inputing\">\r\n\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/inputing_wave2.gif'\" mode=\"heightFix\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"input_box\" v-show=\"!showVoice\">\r\n\t\t\t\t\t\t<input type=\"text\" confirm-type=\"发送\" :value=\"question\"\r\n\t\t\t\t\t\t\t:placeholder=\"canSend?'更多工作就问我':'正在努力思考，请稍后'\" @focus=\"inputBindFocus\" @confirm=\"doSend\"\r\n\t\t\t\t\t\t\t:disabled=\"!canSend\" @input=\"onInput\" :adjust-position=\"false\"\r\n\t\t\t\t\t\t\tstyle=\"padding-left: 20rpx;\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右侧输入按钮切换区 -->\r\n\t\t\t\t<view class=\"func_icon\" v-show=\"showSend\" @click.stop=\"doSend\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/ic_send.png'\" style=\"border:1px solid #D8E6FF;border-radius: 50%;\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"func_icon\" @click.stop=\"changeChatMethod\" v-show=\"!showSend\">\r\n\t\t\t\t\t<image :src=\"showVoice?imgUrl+'/worker/ic_keyboard_blue.png':imgUrl+'/worker/ic_voice_blue.png'\"\r\n\t\t\t\t\t\tstyle=\"border-radius: 50%;background:#fff;\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"voice_inputing\" v-show=\"inputing\">\r\n\t\t\t\t<image :src=\"imgUrl+'/worker/new/inputing_wave2.gif'\" mode=\"heightFix\"></image>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- 电话按钮 -->\r\n\t\t\t<view v-show=\"currentTabIndex == 1 && !inputHeight && audioSwitch\" class=\"phone_icon\"\r\n\t\t\t\t:style=\"{bottom:inputHeight?inputHeight+60+'px':'128rpx'}\" @click=\"toCall\">\r\n\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_telephone.png'\" mode=\"widthFix\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<login :showLogin=\"showLogin\" @closeLogin=\"closeLogin\" @getInfo=\"handleLogin\" :shareId=\"shareId\">\r\n\t\t</login>\r\n\t\t<myModal ref=\"myModal\">\r\n\t\t</myModal>\r\n\t\t<flMask v-if=\"showFlMask\" @closeFengling=\"closeFengling\" @sendMsg=\"sendBtnMsg\"></flMask>\r\n\t\t<broadcast v-if=\"showBroadcast\" :canPlay=\"canPlay\" @close=\"closeBroadcast\" @sendMsg=\"sendBtnMsg\"></broadcast>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport broadcast from \"@/components/broadcast.vue\"\r\n\timport asideUserCenter from \"@/components/aside_user_center.vue\"\r\n\timport login from \"@/components/login.vue\"\r\n\timport welcome from \"@/components/welcome.vue\"\r\n\timport chat from \"@/components/chat.vue\"\r\n\t// import channel from \"@/components/channel.vue\"\r\n\timport commonMethods from \"@/common/commMethods.js\"\r\n\timport urlSetting from \"@/url_setting\";\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from \"vuex\"\r\n\tconst app = getApp();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowBroadcast: true,\r\n\t\t\t\tshowUserStep: false,\r\n\t\t\t\tshowProPop: false,\r\n\t\t\t\tshowFlMask: false,\r\n\t\t\t\tcanPlay: true,\r\n\t\t\t\tgreetingObj: {\r\n\t\t\t\t\tlogo: app.globalData.baseImageUrl + \"/worker/new/index_ai_logo.png\",\r\n\t\t\t\t\ttitle: \"您好呀！我是您的职位推荐官风铃。\",\r\n\t\t\t\t\tcontent: \"您可以将您想找的工作、期望的薪资、福利待遇的要求等等发送给我，我会为您推荐合适的职位，快来与我互动吧。\"\r\n\t\t\t\t},\r\n\t\t\t\tshowLoading: true,\r\n\t\t\t\tshowSend: false,\r\n\t\t\t\tnewUser: false,\r\n\t\t\t\tifSingle: app.globalData.scene == 1154 ? true : false,\r\n\t\t\t\tmenuButtonInfo: app.globalData.menuButtonInfo,\r\n\t\t\t\tmarginTop: app.globalData.marginTop,\r\n\t\t\t\tmaskStartPoint: {},\r\n\t\t\t\tmaskEndPoint: {},\r\n\t\t\t\tshowMenu: false,\r\n\t\t\t\tmanager: app.globalData.manager,\r\n\t\t\t\tmenuList: [{\r\n\t\t\t\t\t\ttext: \"已报名工作\",\r\n\t\t\t\t\t\turl: \"/subpkg/sign_record/sign_record\",\r\n\t\t\t\t\t\ticon: \"\",\r\n\t\t\t\t\t\tvalue: \"1\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"工作浏览记录\",\r\n\t\t\t\t\t\turl: \"/subpkg/view_record/view_record\",\r\n\t\t\t\t\t\ticon: \"\",\r\n\t\t\t\t\t\tvalue: \"13条\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttext: \"积分管理\",\r\n\t\t\t\t\t// \turl: \"/subpkg/score/score\",\r\n\t\t\t\t\t// \ticon: \"\",\r\n\t\t\t\t\t// \tvalue: \"充值\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttext: \"钱包余额\",\r\n\t\t\t\t\t// \turl: \"/pages/balance/balance\",\r\n\t\t\t\t\t// \ticon: \"rmb-circle-fill\",\r\n\t\t\t\t\t// \tvalue: \"0\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttext: \"邀请有礼\",\r\n\t\t\t\t\t// \turl: \"/pages/invite/invite\",\r\n\t\t\t\t\t// \ticon: \"share-fill\",\r\n\t\t\t\t\t// \tvalue: \"立即返现\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"关于我们\",\r\n\t\t\t\t\t\turl: \"/subpkg/about/about\",\r\n\t\t\t\t\t\ticon: \"info-circle-fill\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttext: \"联系客服\",\r\n\t\t\t\t\t\turl: \"\",\r\n\t\t\t\t\t\ticon: \"info-circle-fill\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\timgUrl: app.globalData.baseImageUrl,\r\n\t\t\t\tlist4: [{\r\n\t\t\t\t\t\tname: '风铃'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '对话',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tname: '频道'\r\n\t\t\t\t\t// },\r\n\t\t\t\t],\r\n\t\t\t\tcurrentTabIndex: 0,\r\n\t\t\t\tstatusBarHeight: app.globalData.statusBarHeight,\r\n\t\t\t\tbotSafe: 0,\r\n\t\t\t\tuserInfo: {\r\n\t\t\t\t\tis_vip: false\r\n\t\t\t\t},\r\n\t\t\t\tshowVoice: false,\r\n\t\t\t\tinputing: false,\r\n\t\t\t\tvoicePermisson: false,\r\n\t\t\t\tshowLogin: false,\r\n\t\t\t\tshareId: \"\",\r\n\t\t\t\tparams: null,\r\n\t\t\t\topenid: \"\",\r\n\t\t\t\tcancelRecord: false,\r\n\t\t\t\ttouchStartTime: \"\",\r\n\t\t\t\ttouchEndTime: \"\",\r\n\t\t\t\tsecondTimer: null,\r\n\t\t\t\tnum: 1,\r\n\t\t\t\thold: \"h1\",\r\n\t\t\t\tquestion: \"\",\r\n\t\t\t\tqaList: [],\r\n\t\t\t\tcurrentQalength: 0,\r\n\t\t\t\tcurRespone: {\r\n\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\tcard: null\r\n\t\t\t\t},\r\n\t\t\t\tresponseStr: \"\",\r\n\t\t\t\tresponCount: 0, //用于第一次接收到信息时，开启打字效果\r\n\t\t\t\tprinTimer: null,\r\n\t\t\t\thistoryList: [],\r\n\t\t\t\thistoryId: 0,\r\n\t\t\t\tloadAllHistory: false,\r\n\t\t\t\tinputHeight: 0,\r\n\t\t\t\tchatScrollHeight: 0,\r\n\t\t\t\tbtnInfo: null,\r\n\t\t\t\tbodyStartPoint: null,\r\n\t\t\t\tbodyEndPoint: null,\r\n\t\t\t\tmoveDirection: \"\",\r\n\t\t\t\tprintTimer1: null,\r\n\t\t\t\tprintTimer2: null,\r\n\t\t\t\tprintTimer3: null,\r\n\t\t\t\thasChannel: false,\r\n\t\t\t\tscrollStr: \"\",\r\n\t\t\t\tjobId: \"\",\r\n\t\t\t\tnoMayAsk: false, //记录用户是否报名成功\r\n\t\t\t\tgreetingReady: false,\r\n\t\t\t\taction: \"\", //记录当前状态,\r\n\t\t\t\tcurrentProjectDetail: {\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tworker_salary_min: \"\",\r\n\t\t\t\t\tworker_salary_max: \"\",\r\n\t\t\t\t\tworker_salary_type: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tpro_id: \"\",\r\n\t\t\t\tpro_name: \"\",\r\n\t\t\t\tloadWorkInfo: null,\r\n\t\t\t\tworkReady: false,\r\n\t\t\t\tloadParams: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"answering\", \"connected\", \"connecting\", \"canSend\", \"inChannel\", \"answerContinue\", \"channelQaLen\",\r\n\t\t\t\t\"channelId\", \"channelQaList\", \"location\", \"token\", \"inCall\", \"responEnd\", \"aiReady\", \"ad_tracking_id\",\r\n\t\t\t\t\"callBackCount\", \"audioSwitch\"\r\n\t\t\t]),\r\n\t\t\tindexReady() {\r\n\t\t\t\tif (this.aiReady) {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t\treturn this.aiReady\r\n\t\t\t},\r\n\t\t\t// indexReady() {\r\n\t\t\t// \tif (this.aiReady && this.greetingReady) {\r\n\t\t\t// \t\tuni.hideLoading()\r\n\t\t\t// \t}\r\n\t\t\t// \treturn this.aiReady && this.greetingReady\r\n\t\t\t// },\r\n\t\t\tsendAdWork() {\r\n\t\t\t\tconsole.log(\"sendAdWork aiReady\", this.aiReady)\r\n\t\t\t\tconsole.log(\"sendAdWork workReady\", this.workReady)\r\n\t\t\t\tif (this.workReady && this.aiReady) {\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tjob_id: this.loadWorkInfo.project_id,\r\n\t\t\t\t\t\tname: this.loadWorkInfo.project_name,\r\n\t\t\t\t\t\tmsg: \"你好，我叫\" + this.loadWorkInfo.name + \"，电话\" + this.loadWorkInfo.mobile + \"，对职位\" +\r\n\t\t\t\t\t\t\tthis.loadWorkInfo.project_name + \"(职位ID：\" + this.loadWorkInfo.project_id +\r\n\t\t\t\t\t\t\t\")感兴趣，请问如何报名呢？\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sendBtnMsg(obj)\r\n\t\t\t\t}\r\n\t\t\t\treturn this.aiReady && this.workReady\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad(params) {\r\n\t\t\tif (this.ifSingle) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.setNavigationBarColor({\r\n\t\t\t\tfrontColor: '#000000',\r\n\t\t\t\tbackgroundColor: 'transparent'\r\n\t\t\t})\r\n\t\t\tvar _this = this;\r\n\r\n\t\t\tconsole.log(\"params\", params)\r\n\t\t\tthis.loadParams = params\r\n\t\t\t// 扫码进入\r\n\t\t\tlet scanId = params.scene ? decodeURIComponent(params.scene).split(\"=\")[1] : \"\"\r\n\t\t\tthis.shareId = params.share_id ? params.share_id : (scanId ? scanId : \"\")\r\n\t\t\tthis.params = params\r\n\t\t\tlet readStep = uni.getStorageSync(\"readsteps\") ? uni.getStorageSync(\"readsteps\") : \"\"\r\n\t\t\tif (params.job_id) {\r\n\t\t\t\t// 存在具体职位\r\n\t\t\t\tuni.setStorageSync(\"readsteps\", 1)\r\n\t\t\t\tthis.canPlay = false\r\n\t\t\t\tthis.currentProjectDetail = await this.getProjectDetail()\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (params.pro_id) {\r\n\t\t\t\t\tuni.setStorageSync(\"readsteps\", 1)\r\n\t\t\t\t\tthis.canPlay = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (!readStep) {\r\n\t\t\t\t\t// \tthis.showUserStep = true\r\n\t\t\t\t\t// } else {\r\n\t\t\t\t\t// \tthis.showUserStep = false\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t\tlet location;\r\n\t\t\tthis.resetCity()\r\n\t\t\tthis.resetCallBackCount()\r\n\t\t\t// 网络状态判断\r\n\t\t\tuni.getNetworkType({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (res.networkType.toString() == \"none\") {\r\n\t\t\t\t\t\t// 无网络\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"当前无网络，请检查您的网络设置，并重启小程序。\",\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tconsole.log(\"网络判断error\", err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 监听网络变化\r\n\t\t\tuni.onNetworkStatusChange(async function(res) {\r\n\t\t\t\tconsole.log(\"网络变化了：\", res.isConnected, res.networkType)\r\n\t\t\t\tif (res.networkType.toString() == \"none\") {\r\n\t\t\t\t\t// 监听到无网络\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: \"当前无网络，请检查您的网络设置，并重启小程序。\",\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: \"/subpkg/index/index\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.offNetworkStatusChange()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.btnInfo = await commonMethods.getElementInfo(\".input_btn_wrap\")\r\n\t\t\tif (this.btnInfo) {\r\n\t\t\t\tthis.botSafe = app.globalData.systemHeight - this.btnInfo.top\r\n\t\t\t\tthis.chatScrollHeight = this.btnInfo.top - this.statusBarHeight - 44\r\n\t\t\t}\r\n\t\t\tlocation = await this.getPosition()\r\n\t\t\tthis.setLocation(location)\r\n\t\t\tif (params.from == \"ad\") {\r\n\t\t\t\tthis.pro_id = params.pro_id\r\n\t\t\t\tthis.loadWorkInfo = await this.getWorkInfo()\r\n\t\t\t}\r\n\t\t\t// this.postParams()\r\n\t\t\tthis.getSetting()\r\n\t\t\t// this.showBroadcast = true\r\n\t\t\tif (this.isLogin()) {\r\n\t\t\t\tthis.creatConnect()\r\n\t\t\t\tthis.getInfo()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tconsole.log(\"执行了onUnload\")\r\n\t\t\tthis.canPlay = false\r\n\t\t\tthis.close()\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\tif (this.ifSingle) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet _this = this\r\n\t\t\tthis.closeAnswering()\r\n\t\t\tlet pages = getCurrentPages()\r\n\t\t\tlet currentPage = pages[pages.length - 1]\r\n\t\t\tlet fullPath = currentPage.$page.fullPath\r\n\t\t\tlet urlParamStr = fullPath.split(\"?\").length > 1 ? fullPath.split(\"?\")[1] : \"\"\r\n\t\t\tif (urlParamStr) {\r\n\t\t\t\tconsole.log(\"urlParamStr\", urlParamStr)\r\n\t\t\t\t// this.params = this.getQueryParams(fullPath)\r\n\t\t\t}\r\n\t\t\tlet token = uni.getStorageSync(\"token\") ? uni.getStorageSync(\"token\") : \"\"\r\n\t\t\tif (this.params.from == \"ad\") {\r\n\t\t\t\tthis.pro_id = this.params.pro_id\r\n\t\t\t\tthis.loadWorkInfo = await this.getWorkInfo()\r\n\t\t\t}\r\n\t\t\t// 录音初始化\r\n\t\t\tthis.initRecord()\r\n\t\t\t// if (!this.answerContinue && !this.answering) {\r\n\t\t\t// \tthis.qaList = []\r\n\t\t\t// \tthis.resetData()\r\n\t\t\t// }\r\n\t\t\tuni.onKeyboardHeightChange(this.listenKeyBoard)\r\n\r\n\t\t\tif (this.currentTabIndex == 1) {\r\n\t\t\t\tthis.historyId = 0\r\n\t\t\t\tthis.historyList = await this.getHistory()\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t_this.$refs.chatRef.toScroll()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\t// 移除Audio的各种监听\r\n\t\t\tapp.globalData.Audio.stop()\r\n\t\t\tapp.globalData.Audio.offPlay()\r\n\t\t\tapp.globalData.Audio.offPause()\r\n\t\t\tapp.globalData.Audio.offStop()\r\n\t\t\tapp.globalData.Audio.offEnded()\r\n\t\t\tthis.canPlay = false\r\n\t\t\tuni.offKeyboardHeightChange(this.listenKeyBoard)\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tcomponents: {\r\n\t\t\tlogin,\r\n\t\t\twelcome,\r\n\t\t\tchat,\r\n\t\t\tasideUserCenter,\r\n\t\t\tbroadcast\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tcurrentTabIndex(newValue, oldValue) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (newValue != 0) {\r\n\t\t\t\t\t// 关闭首页语音播放\r\n\t\t\t\t\tthis.canPlay = false\r\n\t\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\t\tif (newValue == 1) {\r\n\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t_this.$refs.chatRef.toScroll()\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (newValue == 0) {\r\n\t\t\t\t\tthis.canPlay = true\r\n\t\t\t\t}\r\n\t\t\t\tif ((newValue == 1) && (this.callBackCount == 0)) {\r\n\t\t\t\t\tif (this.ad_tracking_id) {\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tad_tracking_id: this.ad_tracking_id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$request(\"/worker/ad/callback\", data, \"POST\").then(res => {\r\n\t\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"执行回传\")\r\n\t\t\t\t\t\t\t\tthis.setCallBackCount()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tquestion(newVal) {\r\n\t\t\t\tif (!newVal) {\r\n\t\t\t\t\tthis.showSend = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showSend = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadWorkInfo: {\r\n\t\t\t\thandler: function(newVal, oldVal) {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tif (newVal && newVal.project_id) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true, // 开启深度监听\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"openAnswering\", \"closeAnswering\", \"setConnected\", \"unConnected\", \"setConnecting\",\r\n\t\t\t\t\"unConnecting\", \"openCansend\", \"closeCansend\", \"notChannel\", \"isChannel\", \"addChannelQaList\",\r\n\t\t\t\t\"openAnswerContinue\", \"closeAnswerContinue\", \"updateChannelQaList\", \"setChannelId\", \"setLocation\",\r\n\t\t\t\t\"setToken\", \"clearChannelQaList\", \"notInCall\", \"setCallContent\", \"setRespEnd\", \"notRespEnd\",\r\n\t\t\t\t\"setInterviewCard\", \"setIncallEnroll\", \"setIncallJobId\", \"resetIncallEnroll\", \"closeInterviewCard\",\r\n\t\t\t\t\"setAiReady\", \"resetAiReady\", \"resetCity\", \"setChannelInterviewCard\", \"closeChannelInterviewCard\",\r\n\t\t\t\t\"setJobName\", \"resetJobName\", \"setJobId\", \"resetJobId\", \"setHangUpFirst\", \"setQunCode\",\r\n\t\t\t\t\"setAdTrackingId\", \"setCallBackCount\", \"resetCallBackCount\"\r\n\t\t\t]),\r\n\t\t\thandleLogin() {\r\n\t\t\t\tthis.creatConnect()\r\n\t\t\t\tthis.getInfo()\r\n\t\t\t},\r\n\t\t\tcloseBroadcast() {\r\n\t\t\t\tthis.showBroadcast = false\r\n\t\t\t\tthis.canPlay = false\r\n\t\t\t},\r\n\t\t\tsetScrollHeight() {\r\n\t\t\t\tthis.chatScrollHeight = this.btnInfo.top - this.statusBarHeight - 44\r\n\t\t\t},\r\n\t\t\tbackHome() {\r\n\t\t\t\tthis.currentTabIndex = 0\r\n\t\t\t},\r\n\t\t\t// postParams() {\r\n\t\t\t// \tthis.$request(\"/ad/tracking\", this.params, \"POST\").then(res => {\r\n\t\t\t// \t\tif (res.code == 0) {\r\n\t\t\t// \t\t\tthis.setAdTrackingId(res.data.ad_tracking_id)\r\n\t\t\t// \t\t}\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\tcloseStep() {\r\n\t\t\t\tthis.showUserStep = false\r\n\t\t\t},\r\n\t\t\tgetProjectDetail() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tlet url = \"/guest/project/\" + _this.params.job_id\r\n\t\t\t\t\t_this.$request(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tonInput(e) {\r\n\t\t\t\tthis.question = e.target.value\r\n\t\t\t},\r\n\t\t\t// onBlur() {\r\n\t\t\t// \tthis.question = \"\"\r\n\t\t\t// },\r\n\t\t\topenCanPlay() {\r\n\t\t\t\tthis.canPlay = true\r\n\t\t\t},\r\n\t\t\tcloseProPop() {\r\n\t\t\t\tthis.showProPop = false\r\n\t\t\t\tthis.currentProjectDetail.id = \"\"\r\n\t\t\t\tthis.currentProjectDetail.name = \"\"\r\n\t\t\t},\r\n\t\t\ttoCall(obj) {\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"回答中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet status = \"\"\r\n\t\t\t\tlet job_id = \"\"\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\t// 有参数\r\n\t\t\t\t\tstatus = obj.type\r\n\t\t\t\t\tjob_id = obj.job_id\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\t// 获取语音权限\r\n\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t_this.canPlay = false\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"/subpkg/phone_call/phone_call?status=\" + status + \"&job_id=\" + job_id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t// 弹出麦克风授权\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t_this.$refs.myModal.showModal({\r\n\t\t\t\t\t\t\t\ttitle: \"请先开启语音输入权限。\",\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tconfirmText: \"好的\",\r\n\t\t\t\t\t\t\t\tsuccess(resp) {\r\n\t\t\t\t\t\t\t\t\tif (resp == \"confirm\") {\r\n\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(respone) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (respone.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.canPlay = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"/subpkg/phone_call/phone_call?status=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus + \"&job_id=\" + job_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tfail(openErr) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"voiceAuth\", true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlistenKeyBoard(res) {\r\n\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t\tthis.chatScrollHeight = this.btnInfo.top - this.statusBarHeight - 44\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.chatScrollHeight = app.globalData.systemHeight - this.statusBarHeight - 44 - res\r\n\t\t\t\t\t\t.height -\r\n\t\t\t\t\t\tthis.btnInfo.height - 10\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleChannelStatus(e) {\r\n\t\t\t\tthis.hasChannel = e\r\n\t\t\t},\r\n\t\t\tclickFengling() {\r\n\t\t\t\tthis.showBroadcast = true\r\n\t\t\t\tthis.canPlay = true\r\n\t\t\t},\r\n\t\t\tcloseFengling() {\r\n\t\t\t\tthis.showFlMask = false\r\n\t\t\t},\r\n\t\t\tgetPosition() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.$request(\"/guest/location\").then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tprintResponse() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tlet noOutCount = 0\r\n\t\t\t\tthis.prinTimer = setInterval(function() {\r\n\t\t\t\t\tlet len = _this.responseStr.length\r\n\t\t\t\t\tif (index < len) {\r\n\t\t\t\t\t\t_this.curRespone.content += _this.responseStr[index]\r\n\t\t\t\t\t\tif (_this.inChannel) {\r\n\t\t\t\t\t\t\t_this.updateChannelQaList(_this.curRespone)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 不在通话页\r\n\t\t\t\t\t\t\tif (!_this.inCall) {\r\n\t\t\t\t\t\t\t\t_this.$set(_this.qaList, _this.currentQalength, _this.curRespone)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tindex++\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (_this.responEnd) {\r\n\t\t\t\t\t\t\tif (_this.curRespone.card) {\r\n\t\t\t\t\t\t\t\t_this.curRespone.card.showCard = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclearInterval(_this.prinTimer)\r\n\t\t\t\t\t\t\t_this.openCansend()\r\n\t\t\t\t\t\t\t_this.resetData()\r\n\t\t\t\t\t\t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t\t// 如果用户是报名成功则推送面试卡片\r\n\t\t\t\t\t\t\t// if (_this.noMayAsk) {\r\n\t\t\t\t\t\t\t// \tif (_this.inChannel) {\r\n\t\t\t\t\t\t\t// \t\t_this.setChannelInterviewCard()\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\t_this.setInterviewCard()\r\n\t\t\t\t\t\t\t// \t}\r\n\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else {\r\n\t\t\t\t\t\t// \tif (noOutCount > 999) {\r\n\t\t\t\t\t\t// \t\t// 如果出现链接异常，未接收到结束标识符[DONE]时，超时30s则自动清除定时器\r\n\t\t\t\t\t\t// \t\tclearInterval(_this.prinTimer)\r\n\t\t\t\t\t\t// \t\t_this.openCansend()\r\n\t\t\t\t\t\t// \t\t_this.resetData()\r\n\t\t\t\t\t\t// \t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t// \t\tnoOutCount++\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 30)\r\n\r\n\t\t\t},\r\n\t\t\tgetMayAsk() {\r\n\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t\"job_channel_id\": this.channelId\r\n\t\t\t\t}\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tlet obj = {}\r\n\t\t\t\tconsole.log(\"执行了mayask\")\r\n\t\t\t\tthis.$aiRequest(\"/api/chat/suggested-questions\", data, \"POST\").then(res => {\r\n\t\t\t\t\tif (this.channelId) {\r\n\t\t\t\t\t\t// 频道内\r\n\t\t\t\t\t\tindex = this.channelQaList.length - 1\r\n\t\t\t\t\t\tobj = this.channelQaList[index]\r\n\t\t\t\t\t\tobj.may_ask = res.questions\r\n\t\t\t\t\t\tthis.updateChannelQaList(obj)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = this.qaList.length - 1\r\n\t\t\t\t\t\tobj = this.qaList[index]\r\n\t\t\t\t\t\tobj.may_ask = res.questions\r\n\t\t\t\t\t\tthis.$set(this.qaList, index, obj)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetGreetStatus() {\r\n\t\t\t\tthis.greetingReady = true\r\n\t\t\t},\r\n\t\t\thandleConnectErr() {\r\n\t\t\t\t// 当链接断开或者出错时提示用户重新发送\r\n\t\t\t\tlet len = this.qaList.length\r\n\t\t\t\tif ((len > 0) && (this.qaList[len - 1].origin == \"customer\")) {\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.openCansend()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\tthis.resetData()\r\n\t\t\t\t\tclearInterval(this.prinTimer)\r\n\t\t\t\t\t// 上一条是用户发送的数据时\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tcontent: \"抱歉！刚才打了个盹儿，没理解到您的意思，请重新发送一下您的问题。\",\r\n\t\t\t\t\t\tprintStr: \"\",\r\n\t\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\t\tjobs: [],\r\n\t\t\t\t\t\tmay_ask: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.qaList.push(data)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetHistory() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tconsole.log(\"获取历史记录\")\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tlet url = \"/api/chat/histories?last_message_id=\" + _this.historyId + \"&job_channel_id=\"\r\n\t\t\t\t\t_this.$aiRequest(url, \"\", \"GET\").then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tif (res.data.length == 0) {\r\n\t\t\t\t\t\t\t\t// 新用户\r\n\t\t\t\t\t\t\t\t_this.newUser = true\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_this.newUser = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet newArr = res.data.reverse()\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\t_this.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewArr = _this.handleList(newArr)\r\n\t\t\t\t\t\t\tresolve(newArr)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetMoreHistory() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (!this.loadAllHistory) {\r\n\t\t\t\t\tif (!this.historyId) {\r\n\t\t\t\t\t\tif (this.answerContinue || this.answering) {\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.qaList = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\tlet url = \"/api/chat/histories?last_message_id=\" + this.historyId + \"&job_channel_id=\"\r\n\t\t\t\t\tthis.$aiRequest(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\tlet resArr = res.data.reverse()\r\n\t\t\t\t\t\t\t\tlet newArr = this.handleList(resArr)\r\n\t\t\t\t\t\t\t\tthis.historyList = newArr.concat(this.historyList)\r\n\t\t\t\t\t\t\t\tthis.scrollStr = \"his\" + res.data[len - 1].id\r\n\t\t\t\t\t\t\t\tthis.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.loadAllHistory = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"已加载全部\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 给聊天记录添加字段\r\n\t\t\thandleList(arr) {\r\n\t\t\t\tlet len = arr.length\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tif (arr[i].msg_type == \"voice\") {\r\n\t\t\t\t\t\t// 语音记录，添加是否播放状态,默认为false\r\n\t\t\t\t\t\tarr[i].voice.anmitionPlay = false\r\n\t\t\t\t\t\tarr[i].showTranlate = false\r\n\t\t\t\t\t\tarr[i].showTranIcon = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\tbodyTouchStart(e) {\r\n\t\t\t\tthis.bodyStartPoint = e.touches[0]\r\n\t\t\t},\r\n\t\t\tbodyTouchEnd(e) {\r\n\t\t\t\tif (this.moveDirection == \"left\") {\r\n\t\t\t\t\tif (this.currentTabIndex < this.list4.length - 1) {\r\n\t\t\t\t\t\tthis.currentTabIndex++\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.moveDirection == \"right\") {\r\n\t\t\t\t\tif (this.currentTabIndex > 0) {\r\n\t\t\t\t\t\tthis.currentTabIndex--\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.moveDirection = \"\"\r\n\t\t\t},\r\n\t\t\tbodyTouchMove(e) {\r\n\t\t\t\tif (this.bodyStartPoint.clientX - e.touches[e.touches.length - 1].clientX > 160) {\r\n\r\n\t\t\t\t\t// 左滑了\r\n\t\t\t\t\tthis.moveDirection = \"left\"\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (e.touches[e.touches.length - 1].clientX - this.bodyStartPoint.clientX > 160) {\r\n\t\t\t\t\t// 有滑了\r\n\t\t\t\t\tthis.moveDirection = \"right\"\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnavigate(url) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: url + \"?shareid=\" + this.shareId\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync sendBtnMsg(obj) {\r\n\t\t\t\tconsole.log(\"sendBtnMsg被调用：\", obj)\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (obj.job_id) {\r\n\t\t\t\t\tthis.currentProjectDetail.id = obj.job_id\r\n\t\t\t\t\tthis.currentProjectDetail.name = obj.name\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 如果正在回答问题\r\n\t\t\t\tif (this.answerContinue) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"回答中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeProPop()\r\n\t\t\t\tthis.jobId = obj.job_id\r\n\t\t\t\tthis.action = obj.action\r\n\t\t\t\tif (obj.type == \"job\") {\r\n\t\t\t\t\t// 词语润色\r\n\t\t\t\t\tlet strArr = []\r\n\t\t\t\t\tstrArr.push(\"请介绍一下\" + obj.msg)\r\n\t\t\t\t\tstrArr.push(\"我对\" + obj.msg + \"感兴趣，可以介绍一下吗？\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"的工作内容是什么呢？福利待遇怎么样？\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"这个工作看着还不错，请为我介绍下吧\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"这个工作的详细信息可以说一下吗？\")\r\n\t\t\t\t\tlet random = Math.floor(Math.random() * strArr.length)\r\n\t\t\t\t\tthis.question = strArr[random]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.question = obj.msg\r\n\t\t\t\t}\r\n\t\t\t\tif (this.currentTabIndex != 1) {\r\n\t\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.sendQuestion()\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sendQuestion()\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tinputBindFocus(e) {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\tif (e.detail.height) {\r\n\t\t\t\t\tthis.inputHeight = e.detail.height //这个高度就是软键盘的高度\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitRecord() {\r\n\t\t\t\t//录音开始事件\r\n\t\t\t\tthis.manager.onStart(e => {\r\n\t\t\t\t\tthis.inputing = true\r\n\t\t\t\t});\r\n\t\t\t\t//录音结束事件\r\n\t\t\t\tthis.manager.onStop(res => {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tthis.inputing = false\r\n\t\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\t\tthis.handleRecorder(res);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"长按时间过短\",\r\n\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\tthis.manager.onError(res => {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tthis.inputing = false\r\n\t\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 处理录音数据\r\n\t\t\thandleRecorder({\r\n\t\t\t\ttempFilePath,\r\n\t\t\t\tduration\r\n\t\t\t}) {\r\n\t\t\t\tthis.inputing = false;\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (duration < 600) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"说话时间过短\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.cancelRecord) {\r\n\t\t\t\t\twx.getFileSystemManager().readFile({\r\n\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t// res.data是录音文件的二进制数据\r\n\t\t\t\t\t\t\tconst binaryData = res.data;\r\n\t\t\t\t\t\t\tlet midata = new Uint8Array(binaryData)\r\n\t\t\t\t\t\t\tlet time = new Date().getTime()\r\n\t\t\t\t\t\t\tlet id = uni.getStorageSync(\"openid\") + time\r\n\t\t\t\t\t\t\t// let encoder = new TextEncoder();\r\n\t\t\t\t\t\t\t// let binaryId = encoder.encode(id + \"@@@\")\r\n\t\t\t\t\t\t\tlet binaryId = _this.stringToUint8Array(id + \"@@@@@@\" + _this.jobId + \"@@@@@@\")\r\n\t\t\t\t\t\t\t// 输出拼接后的 Uint8Array\r\n\t\t\t\t\t\t\t// 计算总长度\r\n\t\t\t\t\t\t\tconst totalLength = binaryId.length + midata.length;\r\n\t\t\t\t\t\t\t// 创建一个新的 Uint8Array，长度为所有数组的总和\r\n\t\t\t\t\t\t\tlet mergedArray = new Uint8Array(totalLength);\r\n\t\t\t\t\t\t\t// 使用 set 方法将每个 Uint8Array 的数据填充到新的 Uint8Array 中\r\n\t\t\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\t\t\tmergedArray.set(binaryId, offset);\r\n\t\t\t\t\t\t\toffset += binaryId.length;\r\n\r\n\t\t\t\t\t\t\tmergedArray.set(midata, offset);\r\n\t\t\t\t\t\t\t// offset += data.length;\r\n\t\t\t\t\t\t\tlet showData = {\r\n\t\t\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\t\t\tmsg_type: \"voice\",\r\n\t\t\t\t\t\t\t\tvoice: {\r\n\t\t\t\t\t\t\t\t\tmedia: {\r\n\t\t\t\t\t\t\t\t\t\tkey: \"\",\r\n\t\t\t\t\t\t\t\t\t\turl: tempFilePath\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsecond: duration / 1000,\r\n\t\t\t\t\t\t\t\t\tanmitionPlay: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tshowTranIcon: false,\r\n\t\t\t\t\t\t\t\tshowTranlate: false,\r\n\t\t\t\t\t\t\t\tshowTransing: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.send(mergedArray.buffer, showData, \"voice\")\r\n\t\t\t\t\t\t\t// 接下来你可以对binaryData进行需要的操作\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(error) {\r\n\t\t\t\t\t\t\tconsole.error('读取文件失败：', error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// this.canSend && this.sendMsg(params);\r\n\t\t\t},\r\n\t\t\tstringToUint8Array(str) {\r\n\t\t\t\tconst utf8 = unescape(encodeURIComponent(str)); // 将字符串编码为 UTF-8\r\n\t\t\t\tconst len = utf8.length;\r\n\t\t\t\tconst arr = new Uint8Array(len);\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tarr[i] = utf8.charCodeAt(i);\r\n\t\t\t\t}\r\n\t\t\t\treturn arr;\r\n\t\t\t},\r\n\t\t\tsend(data, param, type) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 回答完成后才能发下一条信息\r\n\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\tthis.$refs.myModal.showModal({\r\n\t\t\t\t\t\ttitle: \"目前有正在回复的对话，请稍后重试\",\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tconfirmText: \"好的\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 如果无历史记录显示加载中\r\n\t\t\t\t\tif (this.historyList.length == 0) {\r\n\t\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.question = \"\"\r\n\t\t\t\t\t// 设置非频道\r\n\t\t\t\t\tthis.notChannel()\r\n\t\t\t\t\t// 设置非通话页\r\n\t\t\t\t\tthis.notInCall()\r\n\t\t\t\t\tapp.globalData.socketTask.send({\r\n\t\t\t\t\t\tdata: type == \"voice\" ? data : JSON.stringify({\r\n\t\t\t\t\t\t\t\"content\": data,\r\n\t\t\t\t\t\t\t\"job_channel_id\": \"\",\r\n\t\t\t\t\t\t\t\"job_id\": _this.jobId,\r\n\t\t\t\t\t\t\t\"action_type\": _this.action\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.currentProjectDetail.id = \"\"\r\n\t\t\t\t\t\t\t_this.currentProjectDetail.name = \"\"\r\n\t\t\t\t\t\t\t_this.loadWorkInfo = null\r\n\t\t\t\t\t\t\t_this.workReady = false\r\n\t\t\t\t\t\t\t_this.jobId = \"\"\r\n\t\t\t\t\t\t\t_this.action = \"\"\r\n\t\t\t\t\t\t\t_this.noMayAsk = false\r\n\t\t\t\t\t\t\t_this.closeInterviewCard()\r\n\t\t\t\t\t\t\t_this.closeChannelInterviewCard()\r\n\t\t\t\t\t\t\t_this.$set(_this, \"question\", \"\")\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tif (data != \"ping\") {\r\n\t\t\t\t\t\t\t\tif (!_this.cancelRecord) {\r\n\t\t\t\t\t\t\t\t\t_this.openAnswering()\r\n\t\t\t\t\t\t\t\t\tparam.printStr = \"\"\r\n\t\t\t\t\t\t\t\t\t_this.$set(_this.qaList, _this.qaList.length, param)\r\n\t\t\t\t\t\t\t\t\t_this.num++\r\n\t\t\t\t\t\t\t\t\t_this.hold = \"h\" + _this.num\r\n\t\t\t\t\t\t\t\t\t_this.closeCansend()\r\n\t\t\t\t\t\t\t\t\t// _this.placeHolder = \"正在努力思考，请稍后...\"\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t_this.jobId = \"\"\r\n\t\t\t\t\t\t\t_this.currentProjectDetail.id = \"\"\r\n\t\t\t\t\t\t\t_this.currentProjectDetail.name = \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tasync creatConnect() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tthis.header = {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t\"app-id\": urlSetting.urls.appid,\r\n\t\t\t\t\t\"open-id\": uni.getStorageSync(\"openid\") ? uni.getStorageSync(\"openid\") : \"\",\r\n\t\t\t\t\t\"address\": _this.location ? encodeURIComponent(JSON.stringify(_this.location)) : \"\",\r\n\t\t\t\t\t\"Authorization\": \"bearer \" + uni.getStorageSync(\"token\"),\r\n\t\t\t\t\t\"ad-platform\": this.loadParams.ad_platform ? this.loadParams.ad_platform : \"\",\r\n\t\t\t\t\t\"ad-sub-platform\": this.loadParams.ad_sub_platform ? this.loadParams.ad_sub_platform : \"\",\r\n\t\t\t\t\t\"job-id\": this.currentProjectDetail.id ? this.currentProjectDetail.id : (this.loadParams\r\n\t\t\t\t\t\t.pro_id ? this.loadParams\r\n\t\t\t\t\t\t.pro_id : \"\")\r\n\t\t\t\t}\r\n\t\t\t\tif (app.globalData.socketTask) {\r\n\t\t\t\t\t// 关闭之前的链接\r\n\t\t\t\t\tawait this.close()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"connected：\", this.connected)\r\n\t\t\t\tif (this.connected || this.connecting) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// 两个链接状态都为false才开始创建链接\r\n\t\t\t\tthis.setConnecting()\r\n\t\t\t\tlet res = await this.connectWebsocket(this.header)\r\n\t\t\t\tif (res.errMsg == \"connectSocket:ok\") {\r\n\t\t\t\t\tthis.initWebsocket()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tconnectWebsocket(header) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet pages = getCurrentPages()\r\n\t\t\t\tlet current = pages[pages.length - 1]\r\n\t\t\t\tif (current.route.indexOf(\"index\") != -1) {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: \"正在连接风铃\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tapp.globalData.socketTask = uni.connectSocket({\r\n\t\t\t\t\t\turl: app.globalData.wssUrl,\r\n\t\t\t\t\t\theader: header,\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.log(\"err:\", err)\r\n\t\t\t\t\t\t\t_this.$refs.myModal.showModal({\r\n\t\t\t\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// 这里是接口调用失败的回调，不是连接失败的回调，请注意\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitWebsocket() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tapp.globalData.socketTask.onOpen((res) => {\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.setConnected()\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\tthis.openCansend()\r\n\t\t\t\t\tthis.setAiReady()\r\n\t\t\t\t\tif (_this.currentProjectDetail.id && !_this.answerContinue) {\r\n\t\t\t\t\t\t_this.showProPop = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('已成功建立链接onOpen', res);\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onError((err) => {\r\n\t\t\t\t\tapp.globalData.socketTask = null\r\n\t\t\t\t\tclearInterval(_this.timer)\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\tthis.unConnected()\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.resetAiReady()\r\n\t\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\t\tthis.handleConnectErr()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.creatConnect()\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onMessage((res) => {\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\t_this.openAnswerContinue()\r\n\t\t\t\t\t_this.closeAnswering()\r\n\t\t\t\t\tlet respData = JSON.parse(res.data)\r\n\t\t\t\t\t// console.log(\"websocket返回：\", respData)\r\n\t\t\t\t\tif (_this.inCall) {\r\n\t\t\t\t\t\t// 对话页\r\n\t\t\t\t\t\tif (respData.type == \"audio_call_start_interview\") {\r\n\t\t\t\t\t\t\t// console.log(\"返回的job_id：\", respData.job_id)\r\n\t\t\t\t\t\t\t_this.setIncallJobId(respData.job_id ? respData.job_id : \"\")\r\n\t\t\t\t\t\t\t// 用户报名了\r\n\t\t\t\t\t\t\t_this.setIncallEnroll()\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.resetIncallEnroll()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if (respData.type == \"audio_call_end\") {\r\n\t\t\t\t\t\t// \t_this.setHangUpFirst()\r\n\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\tif (respData.type == \"applied\") {\r\n\t\t\t\t\t\t\t_this.setHangUpFirst()\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.message != \"[DONE]\") {\r\n\t\t\t\t\t\t\t_this.setCallContent(respData.message)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.setRespEnd()\r\n\t\t\t\t\t\t\t_this.openCansend()\r\n\t\t\t\t\t\t\t_this.resetData()\r\n\t\t\t\t\t\t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (respData.type == \"QCODE\") {\r\n\t\t\t\t\t\t\t// 推送客服微信\r\n\t\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\t\ttype: \"QCODE\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.curRespone.card = JSON.parse(JSON.stringify(card))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.type == \"score_not_enough\") {\r\n\t\t\t\t\t\t\t// 推送充值积分卡片\r\n\t\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\t\ttype: \"score_not_enough\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.setJobName(respData.job_name)\r\n\t\t\t\t\t\t\t_this.curRespone.card = JSON.parse(JSON.stringify(card))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.type == \"applied\") {\r\n\t\t\t\t\t\t\t// 推送充值积分卡片\r\n\t\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\t\ttype: \"applied\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.setJobName(respData.job_name)\r\n\t\t\t\t\t\t\t_this.setJobId(respData.job_id)\r\n\t\t\t\t\t\t\t_this.curRespone.card = JSON.parse(JSON.stringify(card))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.message != \"[DONE]\") {\r\n\t\t\t\t\t\t\t_this.responCount++\r\n\t\t\t\t\t\t\t_this.responseStr += respData.message\r\n\t\t\t\t\t\t\tif (_this.responCount == 1) {\r\n\t\t\t\t\t\t\t\t_this.currentQalength = _this.qaList.length\r\n\t\t\t\t\t\t\t\t_this.printResponse()\r\n\t\t\t\t\t\t\t\tif (respData.type == \"QCODE\") {\r\n\t\t\t\t\t\t\t\t\t_this.getQrcode(respData.job_id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.setRespEnd()\r\n\t\t\t\t\t\t\tif (respData.need_mayask) {\r\n\t\t\t\t\t\t\t\t_this.getMayAsk()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onClose((res) => {\r\n\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\tconsole.log('onClose', res)\r\n\t\t\t\t\tapp.globalData.socketTask = null\r\n\t\t\t\t\tthis.unConnected()\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.resetAiReady()\r\n\r\n\t\t\t\t\tclearInterval(_this.timer)\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.creatConnect()\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\t\tthis.handleConnectErr()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetWorkInfo() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet url = \"/worker/lead-information/\" + this.pro_id\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tthis.$request(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t_this.workReady = true\r\n\t\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetQrcode(id) {\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet url = \"/worker/project/\" + id + \"/wework/external/group/qrcode\"\r\n\t\t\t\tthis.$request(url).then(res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.setQunCode(res.data.qrcode_url)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdoSend(e, text) {\r\n\t\t\t\tif (e.ctrlKey && e.keyCode === 13) {\r\n\t\t\t\t\t//用户点击了ctrl+enter触发\r\n\t\t\t\t\tthis.question += '\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//用户点击了enter触发    执行一些逻辑方法\r\n\t\t\t\t\tif (e !== undefined) {\r\n\t\t\t\t\t\t//发送消息的方法\r\n\t\t\t\t\t\tthis.sendQuestion();\r\n\t\t\t\t\t\t// 阻止浏览器默认的敲击回车换行的方法\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendQuestion() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tif (!this.question) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t\tvar showData = {\r\n\t\t\t\t\t\tcontent: this.question,\r\n\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\tmsg_type: \"text\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.send(this.question, showData, \"\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleTouchMove(e) {\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// let exp1 = (e.touches[e.touches.length - 1].clientX > this.cancelIconLeft) && (e.touches[e.touches.length -\r\n\t\t\t\t// \t1].clientX < this.cancelIconRight)\r\n\t\t\t\tlet exp = e.touches[e.touches.length - 1].clientY < this.btnInfo.top\r\n\t\t\t\tif (exp) {\r\n\t\t\t\t\tthis.cancelRecord = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 间隔一定时间判断用户是否没有输入\r\n\t\t\tnoInput() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.timer = setInterval(function() {\r\n\t\t\t\t\tlet data = \"ping\"\r\n\t\t\t\t\t_this.send(data, \"\", \"\")\r\n\t\t\t\t}, 10000)\r\n\t\t\t},\r\n\t\t\tresetData() {\r\n\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\tthis.curRespone = {\r\n\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\tcard: null\r\n\t\t\t\t}\r\n\t\t\t\tthis.responCount = 0\r\n\t\t\t\tthis.responseStr = \"\"\r\n\t\t\t\tthis.notRespEnd()\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tif (app.globalData.socketTask) {\r\n\t\t\t\t\t\tapp.globalData.socketTask.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstartRecord(e) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"正在回答请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t// 先判断是否是可发送状态\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t_this.touchStartTime = e.timeStamp\r\n\t\t\t\t_this.$refs.chatRef.stopCurAudio()\r\n\t\t\t\tuni.vibrateShort({\r\n\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t});\r\n\t\t\t\t_this.cancelRecord = false\r\n\t\t\t\t_this.manager.start({\r\n\t\t\t\t\tduration: 60000,\r\n\t\t\t\t\tlang: \"zh_CN\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetSetting() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (!res.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t// 可以在这里引导用户去设置中开启权限\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t// 用户已授权，可以继续进行后续操作\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopRecord(e) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.inputing = false\r\n\t\t\t\tthis.touchEndTime = e.timeStamp\r\n\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\tthis.manager.stop()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.manager.stop()\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//录音被打断\r\n\t\t\tcancelVoice(e) {\r\n\t\t\t\tthis.inputing = false\r\n\t\t\t\t// this.canSend = false;\r\n\t\t\t\tthis.manager.stop();\r\n\t\t\t},\r\n\r\n\t\t\tchangeTab(index) {\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\tthis.currentTabIndex = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\topenSetting() {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet ifAuth = uni.getStorageSync(\"voiceAuth\")\r\n\t\t\t\tif (ifAuth) {\r\n\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t\t_this.showVoice = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(openErr) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t_this.showVoice = true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t// 弹出麦克风授权\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"voiceAuth\", true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\tchangeChatMethod() {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\tif (!this.showVoice) {\r\n\t\t\t\t\t// 当前是文字输入，要切换到语音输入\r\n\t\t\t\t\t// 首先获取设置，看是否有语音授权\r\n\t\t\t\t\tif (!this.voicePermisson) {\r\n\t\t\t\t\t\tthis.openSetting()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.showVoice = true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showVoice = false\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// this.showVoice = !this.showVoice\r\n\t\t\t},\r\n\t\t\tmaskStart(e) {\r\n\t\t\t\tthis.maskStartPoint = e.touches[0]\r\n\t\t\t},\r\n\t\t\tmaskEnd(e) {\r\n\r\n\t\t\t},\r\n\t\t\thandleMaskMove(e) {\r\n\t\t\t\t// console.log(e)\r\n\t\t\t\t// 判断左滑\r\n\t\t\t\tif (this.maskStartPoint.clientX - e.touches[e.touches.length - 1].clientX > 20) {\r\n\t\t\t\t\tthis.closeMenu()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseMenu() {\r\n\t\t\t\tthis.showMenu = false\r\n\t\t\t},\r\n\t\t\topenMenu() {\r\n\t\t\t\t// 判断是否登录\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\t// 已登录\r\n\t\t\t\t\tthis.showMenu = true\r\n\t\t\t\t\tthis.getSignList()\r\n\t\t\t\t\tthis.getViewList()\r\n\t\t\t\t\tthis.getInfo()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 未登录显示登录弹窗\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tcloseLogin() {\r\n\t\t\t\tthis.showLogin = false\r\n\t\t\t},\r\n\t\t\tgetSignList() {\r\n\t\t\t\tlet url = \"/worker/job-applications?page=1&status=all\"\r\n\t\t\t\tthis.$request(url).then(res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.menuList[0].value = String(res.data.pagination.total_count)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetViewList() {\r\n\t\t\t\tlet url = \"/worker/job-browse-records?page=1\"\r\n\t\t\t\tthis.$request(url).then(res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.menuList[1].value = res.data.pagination.total_count + \"条\"\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync getInfo(type) {\r\n\t\t\t\tthis.$request(\"/worker/ai-wechat/profile\").then(response => {\r\n\t\t\t\t\tif (response.code == 0) {\r\n\t\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\t\tuni.setStorageSync(\"userInfo\", JSON.stringify(response.data))\r\n\t\t\t\t\t\tthis.userInfo = response.data\r\n\t\t\t\t\t\t// this.menuList[3].value = response.data.balance.total_amount\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (this.currentProjectDetail.id && (type == \"login\")) {\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\ttype: \"job\",\r\n\t\t\t\t\t\tmsg: this.currentProjectDetail.name + \"(ID:\" + this.currentProjectDetail.id + \")\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sendBtnMsg(obj)\r\n\t\t\t\t}\r\n\t\t\t\tthis.historyId = 0\r\n\t\t\t\tthis.historyList = await this.getHistory()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t::v-deep {\r\n\t\t.u-tabs__wrapper__nav__line {\r\n\t\t\tbottom: 0 !important;\r\n\t\t}\r\n\r\n\t\t.u-avatar {\r\n\t\t\tmargin: 0 auto;\r\n\t\t}\r\n\r\n\t\t.inner .u-navbar--fixed {\r\n\t\t\twidth: 83vw;\r\n\t\t}\r\n\r\n\t\t.u-cell-group {\r\n\t\t\tpadding: 0 28rpx;\r\n\t\t}\r\n\r\n\t\t.u-cell__body--large {\r\n\t\t\tbackground: #F7F8FA;\r\n\t\t\t;\r\n\t\t\tborder-radius: 25rpx;\r\n\t\t\t// border: 1rpx solid #28272C;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t}\r\n\r\n\t\t.u-cell__value--large {\r\n\t\t\tfont-weight: 900;\r\n\t\t\tfont-size: 38rpx !important;\r\n\t\t\tcolor: #755022 !important;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(1) .u-cell__body--large {\r\n\t\t\tbackground: linear-gradient(131deg, #E5EEFE 0%, #4E8EFF 100%);\r\n\t\t\tfont-weight: 600;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 9;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(1) .u-cell__body--large::before {\r\n\t\t\tcontent: \"\";\r\n\t\t\twidth: 100px;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground: url($back-ground-url+\"/worker/new/ic_sign_menu.png\") no-repeat;\r\n\t\t\tbackground-size: auto 100%;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tz-index: -1;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(1) .u-cell__value--large {\r\n\t\t\tcolor: #fff !important;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tposition: relative;\r\n\t\t\tmargin-right: 46rpx;\r\n\t\t\tfont-family: Arial;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(1) .u-cell__value--large::after {\r\n\t\t\tcontent: \"份\";\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tright: -34rpx;\r\n\t\t\tfont-size: 27rpx;\r\n\t\t\tfont-weight: 400;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(1) .u-cell__right-icon-wrap {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(2) .u-cell__value--large,\r\n\t\t.u-cell:nth-child(5) .u-cell__value--large {\r\n\t\t\tfont-weight: 400 !important;\r\n\t\t\tfont-size: 27rpx !important;\r\n\t\t\tcolor: #755022 !important;\r\n\t\t\theight: 58rpx;\r\n\t\t\tline-height: 58rpx;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(3) .u-cell__value--large {\r\n\t\t\tfont-size: 31rpx !important;\r\n\t\t}\r\n\r\n\t\t// .u-cell:nth-child(2) .u-cell__value--large {\r\n\t\t// \tfont-weight: 400 !important;\r\n\t\t// \tfont-size: 27rpx !important;\r\n\t\t// \tcolor: #755022 !important;\r\n\t\t// \theight: 58rpx;\r\n\t\t// \tline-height: 58rpx;\r\n\t\t// }\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t// margin-left: 30rpx;\r\n\r\n\t\t.tab {\r\n\t\t\t// margin-right: 40rpx;\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\theight: 44px;\r\n\t\t\tline-height: 44px;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tfont-size: 35rpx;\r\n\t\t\tcolor: #7aa5c8;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\tcolor: #0F2A4F;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tcontent: \"\";\r\n\t\t\t\t\twidth: 29rpx;\r\n\t\t\t\t\theight: 6rpx;\r\n\t\t\t\t\tbackground: #0F2A4F;\r\n\t\t\t\t\tborder-radius: 4rpx;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tbottom: -4rpx;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.logout {\r\n\t\tposition: fixed;\r\n\t\twidth: calc(83vw - 56rpx);\r\n\t\tbottom: 30rpx;\r\n\t\ttext-align: center;\r\n\t\tleft: 28rpx;\r\n\t\theight: 96rpx;\r\n\t\tline-height: 96rpx;\r\n\t\tborder-radius: 25rpx;\r\n\t\tborder: 1rpx solid #D8E6FF;\r\n\t\tfont-size: 31rpx;\r\n\t\tcolor: #8F8F99;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.inner {\r\n\t\twidth: 83vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #fff;\r\n\t\tcolor: #4C4C53;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.user_base_out {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 28rpx 40rpx 28rpx;\r\n\t\tmargin-bottom: 38rpx;\r\n\t\tbackground: url($back-ground-url+\"/worker/new/my_info_cover.png\") no-repeat;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center center;\r\n\t}\r\n\r\n\t.user_base {\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tborder-radius: 25rpx;\r\n\t\toverflow: hidden;\r\n\r\n\r\n\r\n\t\t.tips {\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tbackground: rgba(255, 255, 255, 0.15);\r\n\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.tip {\r\n\t\t\t\twidth: calc(100% - 200rpx);\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tfont-size: 23rpx;\r\n\t\t\t\tcolor: #282319;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&>image {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t.user_box {\r\n\r\n\t\t\t.user {\r\n\t\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t\t&>image {\r\n\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tmargin-right: 28rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.user_base_info {\r\n\t\t\t\t\twidth: calc(100% - 148rpx);\r\n\r\n\t\t\t\t\t.line {\r\n\t\t\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.edit {\r\n\t\t\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\t\t\tfont-size: 27rpx;\r\n\t\t\t\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.text {\r\n\t\t\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\t\t\tfont-size: 31rpx;\r\n\t\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.gender {\r\n\t\t\t\t\t\t\twidth: 62rpx;\r\n\t\t\t\t\t\t\theight: 35rpx;\r\n\t\t\t\t\t\t\tbackground: rgba(33, 111, 249, 0.09);\r\n\t\t\t\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\t\t\t\tborder: 2rpx solid #216FF9;\r\n\t\t\t\t\t\t\tfont-size: 27rpx;\r\n\t\t\t\t\t\t\tcolor: #216FF9;\r\n\t\t\t\t\t\t\tline-height: 35rpx;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.name {\r\n\t\t\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\t\t\tfont-size: 31rpx;\r\n\t\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n\t.ic_menu {\r\n\t\twidth: 58rpx;\r\n\t\theight: 58rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tflex-shrink: 0;\r\n\r\n\t\timage {\r\n\t\t\twidth: 58rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.input_btn_wrap {\r\n\t\twidth: calc(100% - 56rpx);\r\n\t\tposition: fixed;\r\n\t\tleft: 28rpx;\r\n\t\tbottom: 24rpx;\r\n\t\theight: 100rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0rpx 0rpx 4rpx 0rpx rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 63rpx;\r\n\t\tz-index: 10;\r\n\r\n\t\t.phone_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tfont-size: 0;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 77rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.voice_inputing {\r\n\t\t\ttext-align: center;\r\n\r\n\t\t\timage {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.btns_wrap {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: calc(100% + 10px);\r\n\t\t\tleft: 0;\r\n\r\n\t\t\t.btn_item {\r\n\t\t\t\twidth: 180rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\tbackground: #F7F8FA;\r\n\t\t\t\tborder-radius: 63rpx;\r\n\t\t\t\tfont-size: 27rpx;\r\n\t\t\t\tcolor: #7D8488;\r\n\t\t\t\tmargin-right: 15rpx;\r\n\t\t\t\tjustify-content: center;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 28rpx;\r\n\t\t\t\t\tmargin-right: 6rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&.upper {\r\n\t\t\t// position: fixed;\r\n\t\t\t// width: calc(100% - 80rpx);\r\n\t\t\t// left: 40rpx;\r\n\t\t\t// z-index: 105;\r\n\t\t\t// background: #fff;\r\n\t\t\t// border: 1rpx solid #216FF9;\r\n\r\n\t\t\t// .btns_wrap {\r\n\t\t\t// \t.btn_item {\r\n\t\t\t// \t\tbackground: #F7F8FA;\r\n\t\t\t// \t\tcolor: #7D8488;\r\n\t\t\t// \t\t// border: 1rpx solid #216FF9;\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\t.voice_btn_wrap {\r\n\t\t\theight: 100rpx;\r\n\t\t\tline-height: 100rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.input_box {\r\n\t\t\tinput {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tline-height: 100rpx;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #0F2A4F;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tpadding: 0 75rpx 0 100rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.fl_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 8rpx;\r\n\t\t\tleft: 11rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 86rpx;\r\n\t\t\t\theight: 86rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.func_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\tpadding: 0 15rpx 0 30rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\ttop: 0rpx;\r\n\t\t\tright: 0rpx;\r\n\t\t\tz-index: 100;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}