{"version":3,"sources":["uni-app:///main.js","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?38d8","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?9876","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?4147","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?dbd4","uni-app:///pages/test_chat/test_chat.vue","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?a0e4","webpack:///E:/项目文件/langeng5.11/release/employee_onlychat_white/pages/test_chat/test_chat.vue?2a09"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","title","historyId","loadAllHistory","showReAuth","imgUrl","showTranIcon","scrollView","ques","hold","qaList","socketOpen","socketMsgQueue","canSend","placeHolder","qaListLen","historyList","scroll","connected","connecting","socketTask","num","curStrIndex","marginTop","tabMargin","subTabHeight","showRecord","showFullScreen","showWanner","cityData","city1","city2","city3","cityArr","typeTags","seleTypeIds","selectType","open_id","getPhoneData","showInputing","enableSpeeking","timer","currentSiging","showSetting","openid","startPoint","cancelRecord","titleHeight","showAnswering","inputHeight","recordSecond","secondText","secondTimer","cancelIconLeft","cancelIconRight","cancelIconBottom","cancelIconTop","manager","voiceTime","Audio","AudioExam","currentPlayType","currentPlayIndex","touchStartTime","touchEndTime","canRecord","contentHeight","ifSingle","onShareAppMessage","path","imageUrl","onShareTimeline","computed","scrollHeight","onLoad","_this","console","uni","scope","success","fail","menuButtonInfo","clearInterval","icon","onUnload","mounted","methods","getContentHeight","showTrans","el","bodyClick","startTrans","item","handleAudio","playAudio","stopAudio","closeAnmition","handleRecorder","tempFilePath","duration","filePath","mergedArray","offset","id","content","origin","msg_type","voice","media","key","url","second","anmitionPlay","showTranlate","showTransing","stringToUint8Array","arr","getOpenId","code","resolve","getIconPosition","query","keyboardHeightChange","inputBindFocus","startCount","handleTouchMove","openSetting","complete","startRecord","lang","stopRecord","setTimeout","cancelVoice","showAichat","openSeepking","toInput","toVoice","doSend","e","legal","showCancel","getHistory","newArr","getMoreHistory","handleList","toScroll","sendQuestion","creatConnect","header","method","connect","resetData","noInput","formatResultStr","speeking","plugin","dataUrl","send","close","cancel","noPosition"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAooB,CAAgB,mnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC+LxpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA;AACA;AAEA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAnE;MACAoE;MACAC;IACA;EACA;EACAC;IACA;MACAtE;MACAoE;MACAC;IACA;EACA;EACAE;IACAC;MACA;MACA;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cACAC;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA;YAAA;cAIAC;gBACAC;gBACAC;kBACAH;gBACA;gBACAI;kBACAL;kBACAC;gBACA;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAEA;cACA;cACA;cACA;cACAK;cACA;cACA;cACAJ;gBACAD;gBACA;kBACA;gBACA;cACA;;cAGA;cACA;cACA;gBACAA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;cACA;cACA;gBACA;gBACAA;gBACA;gBACAM;gBACAN;gBACA;kBACA;gBACA;kBACAC;oBACA5E;oBACAkF;kBACA;gBACA;cAEA;cACA;gBACA;gBACA;gBACAD;gBACAN;cACA;cACA;cACA;gBACA;cACA;;cAEA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EACAQ;IACA;EACA;EACAC;IAAA;IACA;MACA;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA,iGACAhE;IACA;IACAiE;MACA;QACA;MACA;MACA;QACA;UACA;YACAC;UACA;QACA;MACA;QACA;UACA;YACAA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAD;MACA;MACA;QACAA;MACA;IACA;IACAE;MACA;MACAC;MACA;QACA;UACA;YACAH;UACA;QACA;MACA;QACA;UACAd;YACA;cACAc;YACA;UACA;UACA;UACA;YACAd;cACAC;cACA;gBACA;kBACAgB;kBACAjB;oBACA;sBACAc;sBACAA;oBACA;kBACA;kBACAP;gBACA;cACA;gBACAA;gBACAL;cACA;YACA;UACA;QACA;MAEA;IACA;IACA;IACAgB;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACA;UACA;YACA;cACA;YACA;cACA;YACA;UACA;QAEA;QACA;UACA;YACA;UACA;QAEA;MAEA;QACA;UACA;YACA;cACA;YACA;cACA;YACA;UACA;QAEA;QACA;UACA;YACA;UACA;QAEA;MAEA;;MAGA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;UACA;YACA;UACA;QAEA;MACA;QACA;QACA;UACA;YACA;UACA;QAEA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;UACA;YACA;cACA;YACA;UACA;QAEA;QACA;MACA;QACA;UACA;YACA;cACA;YACA;UACA;QAGA;QACA;MACA;;MACA;MACA;MACA;IACA;IACA;IACAC,8CAGA;MAAA,IAFAC;QACAC;MAEA;MAEAvB;MACAA;MACA;MACA;QACAC;UACA5E;UACAkF;UACAgB;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAxG;UACAyG;UACArB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACAH;YACA;YACA;YACA;YACA;YACA;YACA;YACAyB;YACAC;YAEAD;YACA;;YAEA;cACAE;cACAC;cACAC;cACAC;cACAC;gBACAC;kBACAC;kBACAC;gBACA;gBACAC;gBACAC;cACA;cACA1G;cACA2G;cACAC;YACA;YACAvC;YACA;UACA;;UACAK;YACAJ;UACA;QACA;MACA;;MAGA;IACA;IACAuC;MACA;MACA;MACA;MACA;QACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAxC;UACAE;YACAH;YACA;cACA;cACA;gBACA0C;cACA;cAEAR;cASA;gBACA;kBACAjC;oBACAgC;oBACA7G;kBACA;kBACAuH;gBACA;cACA;YACA;UACA;UACAvC;YACAJ;YACA;YACA;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA4C;MACA;MACA;MACAC;QACA7C;QACA;UACAA;UACAD;UACAA;UACAA;UACAA;QACA;MACA;IAEA;IACA+C;MACA9C;IACA;IACA+C;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACAhD;QACA;UACAD;UACA;YACAA;UACA;YACAA;UACA;QACA;UACAO;UACAL;YACA5E;YACAkG;YACAhB;UACA;UACAR;QACA;MACA;IACA;IACAkD;MACA,yGACA;MACA,wGACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACAjD;QACAE;UACAH;UACA;YACA;YACAD;YACA;UACA;QACA;QACAK;UACAJ;QACA;QACAmD;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;MACAnD;QACAE;UACAH;QACA;MACA;MACA;MACA;MACA;MACA;QACAuB;QACA8B;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;MACA;QACAC;UACAxD;QACA;MACA;IAGA;IACA;IACAyD;MACAxD;MACA;MACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAyD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACA;gBACA;gBACA1D;gBACAE;kBACAC;kBACAC;oBACAH;kBACA;kBACAI;oBACAL;oBACAC;kBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA0D;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;QACA;QACA;UACA;UACA;UACA;UACAC;QACA;MACA;IACA;IACAC;MACA;QACA;UACA9D;YACA5E;YACA2I;UACA;QACA;MACA;IAEA;IACAC;MACAhE;MACA;MACA;QACA;QACAF;UACA;YACA;YACA;YACA;cACAA;YACA;YACAmE;YACAvB;UACA;QACA;MACA;IAEA;IACAwB;MAAA;MACA;QACAlE;QACA;QACA;UACA;YACAA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;QACAA;UACA5E;UACAkF;UACAgB;QACA;MACA;IAEA;IACA;IACA6C;MACA;MACA;QACA;UACA;UACA5B;UACAA;UACAA;QACA;MACA;MACAxC;MACA;IACA;IACAqE;MACA;MACA;QACArE;QACA;UACA;UACA;YACAuD;cACAxD;cACAE;YACA;UAEA;QAEA;UACA;UACAsD;YACAxD;YACAE;UACA;;UAEA;UACA;QACA;;QACAD;MACA;IACA;IACAsE;MACA;MACAvE;MACA;QACAE;UACAM;UACAlF;QACA;MACA;QACA;QACA;UAEA;UACA;YACAuG;YACAC;YACAC;UACA;UACA;QACA;MACA;IACA;IACAyC;MACA;MACA;QACA;MACA;MACA;MACAvE;MACA;QACAkC;QACAsC;UACA;UACA;UACA;QACA;QACAC;QACAtE;UACA;UACAH;QACA;QACAI;UACAH;YACA5E;UACA;UACA;QACA;MACA;;MACA;MACA2E;IACA;IACA0E;MAAA;MACA;MACA;QACA;QACA;QACA;QAEA1E;MACA;MACA;QACA;QACA;QACA;QACAC;QACA;QACA;QACA;QACA;QACAD;QACA;MACA;MACA;QACA;QACAC;QACAF;QACAC;QACA;UACA;YACAD;YACAA;YACA;cACAA;YACA;UACA;QACA;UACAE;YACA5E;UACA;QACA;QACA;MACA;MACA;QACA4E;QACA;QACA;QACAD;QACAM;QACA;QACA;QACA;QACA;QACA;QACA;MACA;;MACAN;IACA;IACA2E;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;QACA7E;MACA;IACA;IACA8E;MACA;QACA;MACA;IACA;IACAC;MACA9E;MACA+E;QACA1B;QACAzB;QACAzB;UACA;YACAH;YACAjF;cACAiK;cACA3J;YACA;UACA;YACA2E;UACA;QACA;QACAI;UACAJ;QACA;MACA;IACA;IACAiF;MACA;MAEA;QACA7J;UACAwG;QACA;QACAzB;UACAH;UACA;YACA;cACAD;cACAA;cACAA;cACAA;cACAA;cACAA;cACAA;cACAA;YACA;UAEA;QAEA;QACAK;UACAJ;QACA;MACA;IACA;IACAkF;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxoCA;AAAA;AAAA;AAAA;AAAusC,CAAgB,kmCAAG,EAAC,C;;;;;;;;;;;ACA3tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/test_chat/test_chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/test_chat/test_chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./test_chat.vue?vue&type=template&id=94f2685c&\"\nvar renderjs\nimport script from \"./test_chat.vue?vue&type=script&lang=js&\"\nexport * from \"./test_chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./test_chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/test_chat/test_chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test_chat.vue?vue&type=template&id=94f2685c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    !_vm.ifSingle && !_vm.showWanner && !_vm.showReAuth\n      ? _vm.__map(_vm.historyList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g0 =\n            item.msg_type == \"text\" ? item.content.replace(/\\\\n/g, \"\\n\") : null\n          var g1 =\n            item.msg_type == \"voice\" ? Math.ceil(item.voice.second * 20) : null\n          var g2 =\n            item.msg_type == \"voice\" ? Math.ceil(item.voice.second) : null\n          return {\n            $orig: $orig,\n            g0: g0,\n            g1: g1,\n            g2: g2,\n          }\n        })\n      : null\n  var l1 =\n    !_vm.ifSingle && !_vm.showWanner && !_vm.showReAuth\n      ? _vm.__map(_vm.qaList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g3 =\n            item.msg_type == \"text\" ? item.content.replace(/\\\\n/g, \"\\n\") : null\n          var g4 =\n            item.msg_type == \"voice\" ? Math.ceil(item.voice.second * 20) : null\n          var g5 =\n            item.msg_type == \"voice\" ? Math.ceil(item.voice.second) : null\n          return {\n            $orig: $orig,\n            g3: g3,\n            g4: g4,\n            g5: g5,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test_chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test_chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"ai_wrap\" @touchstart=\"bodyClick\">\r\n\t\t<view class=\"single_page\" v-if=\"ifSingle\">\r\n\t\t\t<view class=\"intro\">\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t<view class=\"tit\">Hi~</view>\r\n\t\t\t\t\t<view class=\"tit\">我是风铃AI</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t我是专为您服务的客服“风铃AI”，为您提供一对一的工作匹配服务。这里有丰富的工作机会，总会有工作机会能满足您的需要。请问想了解哪些工作呢？操作工、上下货、保安、保洁都有哟，还可以发送语音与我交流哟。\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn\" @click=\"navigate\">\r\n\t\t\t\t\t<text>立即聊天找工作</text>\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/arrow_long.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"ai_chat\" v-if=\"!ifSingle\">\r\n\t\t\t<view class=\"ai_inner\" :style=\"{height:showFullScreen?'100%':'80%'}\" v-if=\"!showWanner && !showReAuth\">\r\n\t\t\t\t<view class=\"full_header\" :style=\"{height:marginTop+tabMargin+'px'}\" v-if=\"showFullScreen\">\r\n\t\t\t\t\t<view class=\"page_top\"\r\n\t\t\t\t\t\t:style=\"{lineHeight:titleHeight+'px',height:titleHeight+'px',bottom:tabMargin+'px'}\">\r\n\t\t\t\t\t\t<view class=\"page_tit\" style=\"font-size: 19px;\">\r\n\t\t\t\t\t\t\t{{title}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <image\r\n\t\t\t\t\t\t\t:src=\"enableSpeeking?imgUrl+'/worker/ic_voice_white.png':imgUrl+'/worker/ic_voice_mute_white.png'\"\r\n\t\t\t\t\t\t\tmode=\"widthFix\" @click=\"openSeepking\" style=\"margin-left: 10rpx;\"></image> -->\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 聊天框 -->\r\n\t\t\t\t<scroll-view class=\"chat_wrap\" :scroll-into-view=\"scrollView\"\r\n\t\t\t\t\t:style=\"{height:scrollHeight+'px',marginTop:marginTop+tabMargin+'px'}\" :scroll-y=\"true\"\r\n\t\t\t\t\tid=\"chatwrap\" @scrolltoupper=\"getMoreHistory\">\r\n\t\t\t\t\t<!-- 历史记录 -->\r\n\t\t\t\t\t<view class=\"history list\">\r\n\t\t\t\t\t\t<view class=\"qa_item\" v-for=\"(item,index) in historyList\" :key=\"item.id\" :id=\"'his'+index\">\r\n\t\t\t\t\t\t\t<view class=\"line\" :class=\"item.origin == 'customer'?'right':'left'\">\r\n\t\t\t\t\t\t\t\t<view class=\"inline_box flex\">\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"item.origin != 'customer'\" :src=\"imgUrl+'/worker/yoyo_avatar.png'\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"cont\" :class=\"item.msg_type == 'text'?'textcont':''\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- 文字信息 -->\r\n\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.msg_type == 'text'\">{{item.content.replace(/\\\\n/g,\"\\n\")}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"voice_line flex flex_end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"trans\" v-show=\"item.showTranIcon\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click.stop=\"startTrans(item,'his')\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/ic_trans.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 语音消息 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_wrap flex flex_end\" v-if=\"item.msg_type == 'voice'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"handleAudio('his',item,index)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@longpress=\"showTrans(item,'his')\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{width:Math.ceil(item.voice.second * 20)+'px',maxWidth:'calc(100% - 136rpx)',minWidth:'50px'}\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"seconds\">{{Math.ceil(item.voice.second)}}'</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_icon\" :class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ voice_icon_right: true },\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ voice_icon_right_an: item.voice.anmitionPlay }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"trans_result text\" v-if=\"item.showTranlate\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"item.origin == 'customer'\" :src=\"imgUrl+'/worker/user_avatar.png'\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\" style=\"margin-left:20rpx;margin-right: 0;\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"list\" id=\"listWrap\">\r\n\t\t\t\t\t\t<view class=\"qa_item\" v-for=\"(item,index) in qaList\" :key=\"item.id\" :id=\"'qa'+index\">\r\n\t\t\t\t\t\t\t<view class=\"line\" :class=\"item.origin == 'customer'?'right':'left'\">\r\n\t\t\t\t\t\t\t\t<view class=\"inline_box flex\">\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"item.origin != 'customer'\" :src=\"imgUrl+'/worker/yoyo_avatar.png'\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"cont\" :class=\"item.msg_type == 'text'?'textcont':''\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- 文字信息 -->\r\n\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.msg_type == 'text'\">{{item.content.replace(/\\\\n/g,\"\\n\")}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"voice_line flex flex_end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"trans\" v-show=\"item.showTranIcon\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click.stop=\"startTrans(item,'qa')\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/ic_trans.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 语音消息 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_wrap flex flex_end\" v-if=\"item.msg_type == 'voice'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"handleAudio('qa',item,index)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@longpress=\"showTrans(item,'qa')\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{width:Math.ceil(item.voice.second * 20)+'px',maxWidth:'calc(100% - 136rpx)',minWidth:'50px'}\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"seconds\">{{Math.ceil(item.voice.second)}}'</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_icon\" :class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ voice_icon_right: true },\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ voice_icon_right_an: item.voice.anmitionPlay }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"trans_result text\" v-if=\"item.showTranlate\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"trans_result text\" v-if=\"!item.showTranlate && item.showTransing\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"text-align: right;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/ic_transing.gif'\" mode=\"widthFix\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.showTransing\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"item.origin == 'customer'\" :src=\"imgUrl+'/worker/user_avatar.png'\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\" style=\"margin-left:20rpx;margin-right: 0;\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<transition name=\"fade\">\r\n\t\t\t\t\t\t\t<view class=\"qa_item\" v-if=\"showAnswering\">\r\n\t\t\t\t\t\t\t\t<view class=\"line left\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"inline_box flex\" style=\"align-items: center;\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/yoyo_avatar.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"cont\" style=\"background:transparent;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/answering.gif'\" mode=\"widthFix\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width:100rpx;\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t<view :id=\"hold\" style=\"height:10rpx;width:100%;\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t<!-- 提问框 -->\r\n\t\t\t\t<view class=\"ques_wrap\"\r\n\t\t\t\t\t:style=\"{paddingTop:tabMargin+'px',bottom:inputHeight?inputHeight+'px':2*tabMargin+'px'}\"\r\n\t\t\t\t\t:class=\"inputHeight?'upper':''\">\r\n\t\t\t\t\t<view class=\"input flex flex_btween\" v-show=\"!showRecord\">\r\n\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/chat_record_icon.png'\" @tap=\"toVoice\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<view class=\"input_right flex\">\r\n\t\t\t\t\t\t\t<input type=\"text\" :adjust-position=\"false\" :placeholder=\"placeHolder\" v-model=\"ques\"\r\n\t\t\t\t\t\t\t\tconfirm-type=\"send\" @focus=\"inputBindFocus\" @confirm=\"doSend\"\r\n\t\t\t\t\t\t\t\t:style=\"{height:subTabHeight+'px',lineHeight:subTabHeight+'px'}\">\r\n\t\t\t\t\t\t\t<view class=\"confirm_send\" @tap=\"sendQuestion\">发送</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"input flex flex_btween\" v-show=\"showRecord\">\r\n\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/chat_key_icon.png'\" @click=\"toInput\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<view class=\"btn in_put press\" v-if=\"showSetting\"\r\n\t\t\t\t\t\t\t:style=\"{height:subTabHeight+'px',lineHeight:subTabHeight+'px'}\" @click=\"openSetting\">开启语音权限\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"btn in_put press\" :style=\"{height:subTabHeight+'px',lineHeight:subTabHeight+'px'}\"\r\n\t\t\t\t\t\t\t@touchstart=\"startRecord\" @touchend=\"stopRecord\" @touchmove=\"handleTouchMove\"\r\n\t\t\t\t\t\t\t@touchcancel.stop=\"cancelVoice\" v-if=\"!showSetting\">\r\n\t\t\t\t\t\t\t按住说话\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"inputing\" :style=\"{zIndex:showInputing?'110':'-1'}\">\r\n\t\t\t\t<!-- <view class=\"inputing\" v-show=\"showInputing\"> -->\r\n\t\t\t\t<image :src=\"imgUrl+'/worker/inputing.gif'\" mode=\"widthFix\"></image>\r\n\t\t\t\t<text>{{secondText}}</text>\r\n\t\t\t\t<view class=\"bot_bg\">\r\n\t\t\t\t\t<view class=\"text\" v-if=\"cancelRecord\">松开 取消</view>\r\n\t\t\t\t\t<image :src=\"cancelRecord?imgUrl+'/worker/cancel_sure_icon.png':imgUrl+'/worker/cancel_icon.png'\"\r\n\t\t\t\t\t\tmode=\"widthFix\" style=\"width: 140rpx;\" class=\"cancel_icon\"></image>\r\n\t\t\t\t\t<view class=\"text\" :style=\"{opacity:cancelRecord?0:1}\">松开 发送</view>\r\n\t\t\t\t\t<image :src=\"cancelRecord?imgUrl+'/worker/cancel_bot_bg.png':imgUrl+'/worker/input_bot_bg.png'\"\r\n\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"auth flex flex_btween\" v-if=\"showReAuth\">\r\n\t\t\t\t<view class=\"btn no\" @click=\"noPosition\">不开启</view>\r\n\t\t\t\t<view class=\"btn sure\" @click=\"openSetting\">开启定位，推荐适合您的职位</view>\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\t\t<login :showLogin=\"showLogin\" pageName=\"ai_chat\" @handleSign=\"toSign(currentSiging)\" @closeLogin=\"closeLogin\">\r\n\t\t</login>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst plugin = requirePlugin(\"WechatSI\")\r\n\tlet translater = plugin.getRecordRecognitionManager()\r\n\timport urlSetting from \"@/url_setting\";\r\n\tconst app = getApp();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\thistoryId: 0,\r\n\t\t\t\tloadAllHistory: false,\r\n\t\t\t\tshowReAuth: false,\r\n\t\t\t\timgUrl: app.globalData.baseImageUrl,\r\n\t\t\t\tshowTranIcon: false,\r\n\t\t\t\tscrollView: \"\",\r\n\t\t\t\tques: \"\",\r\n\t\t\t\thold: \"h1\",\r\n\t\t\t\tqaList: [],\r\n\t\t\t\tsocketOpen: false,\r\n\t\t\t\tsocketMsgQueue: [],\r\n\t\t\t\tcanSend: true,\r\n\t\t\t\tplaceHolder: \"想了解什么工作，请告诉我吧\",\r\n\t\t\t\tqaListLen: 0,\r\n\t\t\t\thistoryList: [],\r\n\t\t\t\tscroll: 0,\r\n\t\t\t\tconnected: false,\r\n\t\t\t\tconnecting: false,\r\n\t\t\t\tsocketTask: false,\r\n\t\t\t\tnum: 1,\r\n\t\t\t\tcurStrIndex: 0,\r\n\t\t\t\tmarginTop: app.globalData.marginTop,\r\n\t\t\t\ttabMargin: app.globalData.tabMargin,\r\n\t\t\t\t// scrollHeight: 0,\r\n\t\t\t\tsubTabHeight: app.globalData.subTabHeight,\r\n\t\t\t\tshowRecord: true,\r\n\t\t\t\tshowFullScreen: true,\r\n\t\t\t\tshowWanner: false,\r\n\t\t\t\tcityData: [],\r\n\t\t\t\tcity1: \"\",\r\n\t\t\t\tcity2: \"\",\r\n\t\t\t\tcity3: \"\",\r\n\t\t\t\tcityArr: [],\r\n\t\t\t\ttypeTags: [],\r\n\t\t\t\tseleTypeIds: [],\r\n\t\t\t\tselectType: [],\r\n\t\t\t\topen_id: \"\",\r\n\t\t\t\tgetPhoneData: {},\r\n\t\t\t\tshowInputing: false,\r\n\t\t\t\tenableSpeeking: false,\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tcurrentSiging: {},\r\n\t\t\t\tshowSetting: false,\r\n\t\t\t\topenid: \"\",\r\n\t\t\t\tstartPoint: {}, //记录长按录音开始点信息,用于后面计算滑动距离。\r\n\t\t\t\tcancelRecord: false,\r\n\t\t\t\ttitleHeight: 0,\r\n\t\t\t\tshowAnswering: false,\r\n\t\t\t\tinputHeight: 0,\r\n\t\t\t\trecordSecond: 0,\r\n\t\t\t\tsecondText: \"00:00\",\r\n\t\t\t\tsecondTimer: null,\r\n\t\t\t\tcancelIconLeft: 0,\r\n\t\t\t\tcancelIconRight: 0,\r\n\t\t\t\tcancelIconBottom: 0,\r\n\t\t\t\tcancelIconTop: 0,\r\n\t\t\t\tmanager: uni.getRecorderManager(),\r\n\t\t\t\tvoiceTime: 0, //总共录音时长,\r\n\t\t\t\tAudio: uni.createInnerAudioContext(),\r\n\t\t\t\tAudioExam: null, //正在播放音频的实例,\r\n\t\t\t\tcurrentPlayType: \"\",\r\n\t\t\t\tcurrentPlayIndex: 0,\r\n\t\t\t\ttouchStartTime: 0,\r\n\t\t\t\ttouchEndTime: 0,\r\n\t\t\t\tcanRecord: true,\r\n\t\t\t\tcontentHeight: 0,\r\n\t\t\t\tifSingle: app.globalData.scene == 1154 ? true : false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareAppMessage() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"AI找工作，两句话的事儿\",\r\n\t\t\t\tpath: \"/pages/index/index\",\r\n\t\t\t\timageUrl: app.globalData.baseImageUrl + \"/worker/mini_share.jpg\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareTimeline() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"AI找工作，两句话的事儿\",\r\n\t\t\t\tpath: \"/pages/index/index\",\r\n\t\t\t\timageUrl: app.globalData.baseImageUrl + \"/worker/mini_share.jpg\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tscrollHeight() {\r\n\t\t\t\t// 根据内容的高度动态设置scroll-view的高度\r\n\t\t\t\treturn this.contentHeight || 300; // 默认高度或根据实际情况设置\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad(param) {\r\n\t\t\tvar _this = this;\r\n\t\t\tconsole.log(this.ifSingle, \"ifsingle\")\r\n\t\t\tif (this.ifSingle) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tuni.authorize({\r\n\t\t\t\tscope: 'scope.record',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log(res, 'success')\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\t_this.showSetting = true\r\n\t\t\t\t\tconsole.log(err, 'err')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.openid = await this.getOpenId()\r\n\t\t\tthis.historyList = await this.getHistory()\r\n\r\n\t\t\t// this.scrollHeight = app.globalData.systemHeight - 4 * this.tabMargin - this.subTabHeight - this\r\n\t\t\t// \t.marginTop\r\n\t\t\tthis.toScroll()\r\n\t\t\tthis.creatConnect()\r\n\t\t\tlet menuButtonInfo = uni.getMenuButtonBoundingClientRect()\r\n\t\t\tthis.titleHeight = menuButtonInfo.height\r\n\t\t\tthis.title = \"风铃AI\"\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tconsole.log(res.height, \"键盘高度变化\")\r\n\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\r\n\t\t\t// this.getHistory()\r\n\t\t\t//录音开始事件\r\n\t\t\tthis.manager.onStart(e => {\r\n\t\t\t\tconsole.log(\"录音开始\")\r\n\t\t\t\tthis.showInputing = true\r\n\t\t\t\tthis.recordSecond = 0\r\n\t\t\t\tthis.secondText = \"00:00\"\r\n\t\t\t\tthis.startCount()\r\n\t\t\t\tthis.getIconPosition()\r\n\t\t\t});\r\n\t\t\t//录音结束事件\r\n\t\t\tthis.manager.onStop(res => {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tconsole.log(\"录音结束\")\r\n\t\t\t\tthis.showInputing = false\r\n\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\tconsole.log(\"时间间隔:\", this.touchEndTime - this.touchStartTime)\r\n\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\tthis.handleRecorder(res);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"长按时间过短\",\r\n\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\tthis.manager.onError(res => {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.showInputing = false\r\n\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\tconsole.log(\"录音出错：\", res.errMsg)\r\n\t\t\t})\r\n\t\t\t//音频停止事件\r\n\t\t\tthis.Audio.onStop(e => {\r\n\t\t\t\tthis.closeAnmition();\r\n\t\t\t});\r\n\r\n\t\t\t//音频播放结束事件\r\n\t\t\tthis.Audio.onEnded(e => {\r\n\t\t\t\tthis.closeAnmition();\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tthis.close()\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t// 假设获取内容高度的逻辑\r\n\t\t\t\tthis.getContentHeight();\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetContentHeight() {\r\n\t\t\t\t// 示例中假设获取内容高度的逻辑\r\n\t\t\t\tthis.contentHeight = app.globalData.systemHeight - 5 * this.tabMargin - this.subTabHeight - this\r\n\t\t\t\t\t.marginTop; // 假设内容高度是1000px\r\n\t\t\t},\r\n\t\t\tshowTrans(item, type) {\r\n\t\t\t\tif (item.showTranlate) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (type == \"his\") {\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.id == item.id) {\r\n\t\t\t\t\t\t\tel.showTranIcon = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.id == item.id) {\r\n\t\t\t\t\t\t\tel.showTranIcon = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbodyClick() {\r\n\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\tel.showTranIcon = false\r\n\t\t\t\t})\r\n\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\tel.showTranIcon = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstartTrans(item, type) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\titem.showTranIcon = false\r\n\t\t\t\tif (type == \"his\") {\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.id == item.id) {\r\n\t\t\t\t\t\t\tel.showTranlate = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!item.showTranlate) {\r\n\t\t\t\t\t\t_this.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\t\tif (el.id == item.id) {\r\n\t\t\t\t\t\t\t\tel.showTransing = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tlet url = \"/ai/voice/\" + item.id + \"/recognize/result\"\r\n\t\t\t\t\t\tlet t = setInterval(function() {\r\n\t\t\t\t\t\t\t_this.$request(url).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res, \"查询结果\")\r\n\t\t\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\t\t\tif (res.data.content) {\r\n\t\t\t\t\t\t\t\t\t\titem.content = res.data.content\r\n\t\t\t\t\t\t\t\t\t\t_this.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (el.id == item.id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tel.showTranlate = true\r\n\t\t\t\t\t\t\t\t\t\t\t\tel.showTransing = false\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tclearInterval(t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tclearInterval(t)\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//控制播放还是暂停音频文件\r\n\t\t\thandleAudio(type, item, index) {\r\n\t\t\t\tthis.AudioExam = item;\r\n\t\t\t\tthis.currentPlayType = type\r\n\t\t\t\tthis.currentPlayIndex = index\r\n\t\t\t\t// this.playAudio(item)\r\n\t\t\t\tthis.Audio.paused ? this.playAudio(item) : this.stopAudio(item);\r\n\t\t\t},\r\n\t\t\t//播放音频\r\n\t\t\tplayAudio(item) {\r\n\t\t\t\tthis.Audio.src = item.voice.media.url;\r\n\t\t\t\tthis.Audio.id = item.id;\r\n\t\t\t\tthis.Audio.play();\r\n\t\t\t\tif (this.currentPlayType == \"his\") {\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tif (index == this.currentPlayIndex) {\r\n\t\t\t\t\t\t\t\tthis.historyList[this.currentPlayIndex].voice.anmitionPlay = true\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.historyList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tthis.qaList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tif (index == this.currentPlayIndex) {\r\n\t\t\t\t\t\t\t\tthis.qaList[this.currentPlayIndex].voice.anmitionPlay = true\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.qaList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tthis.historyList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// item.anmitionPlay = true;\r\n\t\t\t},\r\n\t\t\t//停止音频\r\n\t\t\tstopAudio(item) {\r\n\t\t\t\tif (this.currentPlayType == \"his\") {\r\n\t\t\t\t\tthis.historyList[this.currentPlayIndex].voice.anmitionPlay = false\r\n\t\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tthis.qaList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.qaList[this.currentPlayIndex].voice.anmitionPlay = false\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tthis.historyList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// item.anmitionPlay = false;\r\n\t\t\t\tthis.Audio.src = '';\r\n\t\t\t\tthis.Audio.stop();\r\n\t\t\t},\r\n\t\t\t//关闭动画\r\n\t\t\tcloseAnmition() {\r\n\t\t\t\tconst id = this.Audio.id;\r\n\t\t\t\tlet item;\r\n\t\t\t\tif (this.currentPlayType == \"his\") {\r\n\t\t\t\t\tthis.historyList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tif (el.id == id) {\r\n\t\t\t\t\t\t\t\tthis.historyList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// item = this.historyList.find(it => it.id == id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.qaList.forEach((el, index) => {\r\n\t\t\t\t\t\tif (el.msg_type == \"voice\") {\r\n\t\t\t\t\t\t\tif (el.id == id) {\r\n\t\t\t\t\t\t\t\tthis.qaList[index].voice.anmitionPlay = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// item = this.qaList.find(it => it.id == id);\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentPlayType = \"\"\r\n\t\t\t\tthis.currentPlayIndex = 0\r\n\t\t\t\t// item.anmitionPlay = false;\r\n\t\t\t},\r\n\t\t\t// 处理录音数据\r\n\t\t\thandleRecorder({\r\n\t\t\t\ttempFilePath,\r\n\t\t\t\tduration\r\n\t\t\t}) {\r\n\t\t\t\tlet _this = this\r\n\r\n\t\t\t\tconsole.log(\"tempFilePath\", tempFilePath)\r\n\t\t\t\tconsole.log(\"duration\", duration)\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tif (duration < 600) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"说话时间过短\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\t// \t_this.showInputing = false;\r\n\t\t\t\t\t// }, 200)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// contentDuration = duration / 1000;\r\n\t\t\t\tthis.showInputing = false;\r\n\t\t\t\t// let showData = {\r\n\t\t\t\t// \tid: new Date().getTime(),\r\n\t\t\t\t// \tcontent: \"\",\r\n\t\t\t\t// \torigin: \"customer\",\r\n\t\t\t\t// \tvoice: {\r\n\t\t\t\t// \t\tmedia: {\r\n\t\t\t\t// \t\t\tkey: \"\",\r\n\t\t\t\t// \t\t\turl: tempFilePath\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\tsecond: duration / 1000,\r\n\t\t\t\t// \t\tanmitionPlay: false\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t\t// if (!this.cancelRecord) {\r\n\t\t\t\t// \tthis.qaList.push(showData)\r\n\t\t\t\t// }\r\n\t\t\t\tif (!this.cancelRecord) {\r\n\t\t\t\t\twx.getFileSystemManager().readFile({\r\n\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t// res.data是录音文件的二进制数据\r\n\t\t\t\t\t\t\tconst binaryData = res.data;\r\n\t\t\t\t\t\t\tlet midata = new Uint8Array(binaryData)\r\n\t\t\t\t\t\t\tlet time = new Date().getTime()\r\n\t\t\t\t\t\t\tlet id = uni.getStorageSync(\"openid\") + time\r\n\t\t\t\t\t\t\t// let encoder = new TextEncoder();\r\n\t\t\t\t\t\t\t// let binaryId = encoder.encode(id + \"@@@\")\r\n\t\t\t\t\t\t\tlet binaryId = _this.stringToUint8Array(id + \"@@@\")\r\n\t\t\t\t\t\t\t// 输出拼接后的 Uint8Array\r\n\t\t\t\t\t\t\tconsole.log(binaryId.length, midata.length);\r\n\t\t\t\t\t\t\t// 计算总长度\r\n\t\t\t\t\t\t\tconst totalLength = binaryId.length + midata.length;\r\n\t\t\t\t\t\t\t// 创建一个新的 Uint8Array，长度为所有数组的总和\r\n\t\t\t\t\t\t\tlet mergedArray = new Uint8Array(totalLength);\r\n\t\t\t\t\t\t\t// 使用 set 方法将每个 Uint8Array 的数据填充到新的 Uint8Array 中\r\n\t\t\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\t\t\tmergedArray.set(binaryId, offset);\r\n\t\t\t\t\t\t\toffset += binaryId.length;\r\n\r\n\t\t\t\t\t\t\tmergedArray.set(midata, offset);\r\n\t\t\t\t\t\t\t// offset += data.length;\r\n\r\n\t\t\t\t\t\t\tlet showData = {\r\n\t\t\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\t\t\tmsg_type: \"voice\",\r\n\t\t\t\t\t\t\t\tvoice: {\r\n\t\t\t\t\t\t\t\t\tmedia: {\r\n\t\t\t\t\t\t\t\t\t\tkey: \"\",\r\n\t\t\t\t\t\t\t\t\t\turl: tempFilePath\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsecond: duration / 1000,\r\n\t\t\t\t\t\t\t\t\tanmitionPlay: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tshowTranIcon: false,\r\n\t\t\t\t\t\t\t\tshowTranlate: false,\r\n\t\t\t\t\t\t\t\tshowTransing: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.send(mergedArray.buffer, showData, \"voice\")\r\n\t\t\t\t\t\t\t// 接下来你可以对binaryData进行需要的操作\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(error) {\r\n\t\t\t\t\t\t\tconsole.error('读取文件失败：', error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// this.canSend && this.sendMsg(params);\r\n\t\t\t},\r\n\t\t\tstringToUint8Array(str) {\r\n\t\t\t\tconst utf8 = unescape(encodeURIComponent(str)); // 将字符串编码为 UTF-8\r\n\t\t\t\tconst len = utf8.length;\r\n\t\t\t\tconst arr = new Uint8Array(len);\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tarr[i] = utf8.charCodeAt(i);\r\n\t\t\t\t}\r\n\t\t\t\treturn arr;\r\n\t\t\t},\r\n\t\t\tgetOpenId() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res, \"dyres\")\r\n\t\t\t\t\t\t\tif (res.errMsg == 'login:ok') {\r\n\t\t\t\t\t\t\t\tlet url = \"\"\r\n\t\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\t\tcode: res.code\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\turl = \"/auth/worker/wechat/mini/openid\"\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef MP-KUAISHOU\r\n\t\t\t\t\t\t\t\turl = \"/auth/worker/kuaishou/openid\"\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\t\t\t\t\t\turl = \"/auth/worker/douyin/openid\"\r\n\t\t\t\t\t\t\t\tdata.anonymous_code = res.anonymousCode\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tthis.$request(url, data, \"POST\").then(resp => {\r\n\t\t\t\t\t\t\t\t\tif (resp.code == 0) {\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\t\t\tkey: \"openid\",\r\n\t\t\t\t\t\t\t\t\t\t\tdata: resp.data.open_id\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tresolve(resp.data.open_id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.log(err, \"接口调用失败\")\r\n\t\t\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t\t\t// \ttitle: \"登录失败\",\r\n\t\t\t\t\t\t\t// \tcontent: \"授权登录失败，将无法使用部分功能\",\r\n\t\t\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetIconPosition() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tconst query = uni.createSelectorQuery().in(_this);\r\n\t\t\t\tquery.select('.cancel_icon').boundingClientRect(data => {\r\n\t\t\t\t\tconsole.log(\"querydata\", data)\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tconsole.log('元素的位置信息：', data);\r\n\t\t\t\t\t\t_this.cancelIconTop = data.top\r\n\t\t\t\t\t\t_this.cancelIconBottom = data.top + data.width\r\n\t\t\t\t\t\t_this.cancelIconLeft = data.left\r\n\t\t\t\t\t\t_this.cancelIconRight = data.right\r\n\t\t\t\t\t}\r\n\t\t\t\t}).exec();\r\n\r\n\t\t\t},\r\n\t\t\tkeyboardHeightChange(e) {\r\n\t\t\t\tconsole.log(e, \"键盘\")\r\n\t\t\t},\r\n\t\t\tinputBindFocus(e) {\r\n\t\t\t\tif (e.detail.height) {\r\n\t\t\t\t\tthis.inputHeight = e.detail.height //这个高度就是软键盘的高度\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 录音计时\r\n\t\t\tstartCount() {\r\n\t\t\t\tthis.recordSecond = 0\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.secondTimer = setInterval(function() {\r\n\t\t\t\t\tconsole.log(\"recordSecond:\", _this.recordSecond)\r\n\t\t\t\t\tif (_this.recordSecond < 60) {\r\n\t\t\t\t\t\t_this.recordSecond++\r\n\t\t\t\t\t\tif (_this.recordSecond < 10) {\r\n\t\t\t\t\t\t\t_this.secondText = \"00:0\" + _this.recordSecond\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.secondText = \"00:\" + _this.recordSecond\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"最多发送60s\",\r\n\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_this.stopRecord()\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\thandleTouchMove(e) {\r\n\t\t\t\tlet exp1 = (e.touches[e.touches.length - 1].clientX > this.cancelIconLeft) && (e.touches[e.touches.length -\r\n\t\t\t\t\t1].clientX < this.cancelIconRight)\r\n\t\t\t\tlet exp2 = (e.touches[e.touches.length - 1].clientY > this.cancelIconTop) && (e.touches[e.touches.length -\r\n\t\t\t\t\t1].clientY < this.cancelIconBottom)\r\n\t\t\t\tif (exp1 && exp2) {\r\n\t\t\t\t\tthis.cancelRecord = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenSetting() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tuni.openSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res.authSetting, \"res.authSetting\")\r\n\t\t\t\t\t\tif (res.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t// _this.showInputing = false\r\n\t\t\t\t\t\t\t_this.showSetting = false\r\n\t\t\t\t\t\t\t// _this.showRecord = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(openErr) {\r\n\t\t\t\t\t\tconsole.log(openErr, 'openerr')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\tthis.showReAuth = false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstartRecord(e) {\r\n\t\t\t\tthis.touchStartTime = e.timeStamp\r\n\t\t\t\tif (!this.Audio.paused) {\r\n\t\t\t\t\t//如果音频正在播放 先暂停。\r\n\t\t\t\t\tthis.stopAudio(this.AudioExam)\r\n\t\t\t\t}\r\n\t\t\t\tuni.vibrateShort({\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\tconsole.log('success');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.startPoint = e.touches[0]; //记录长按时开始点信息，后面用于计算上划取消时手指滑动的距离。\r\n\t\t\t\t// this.showInputing = true\r\n\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\tthis.manager.start({\r\n\t\t\t\t\tduration: 60000,\r\n\t\t\t\t\tlang: \"zh_CN\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopRecord(e) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.touchEndTime = e.timeStamp\r\n\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\tthis.showInputing = false\r\n\t\t\t\t\tthis.manager.stop()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.manager.stop();\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//录音被打断\r\n\t\t\tcancelVoice(e) {\r\n\t\t\t\tconsole.log(\"touch取消\")\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\t// this.canSend = false;\r\n\t\t\t\tthis.manager.stop();\r\n\t\t\t},\r\n\t\t\t// changeScreen() {\r\n\t\t\t// \tthis.showFullScreen = !this.showFullScreen\r\n\t\t\t// \tif (this.showFullScreen) {\r\n\t\t\t// \t\tthis.scrollHeight = app.globalData.systemHeight - 2 * this.subTabHeight -\r\n\t\t\t// \t\t\t2 * this.tabMargin - this.marginTop\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tthis.scrollHeight = app.globalData.systemHeight * 0.8 - this.tabMargin - 2 * this\r\n\t\t\t// \t\t\t.subTabHeight\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\t\t\tasync showAichat() {\r\n\t\t\t\tthis.historyId = 0\r\n\t\t\t\tthis.historyList = []\r\n\t\t\t\tthis.loadAllHistory = false\r\n\t\t\t\tthis.qaList = []\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tuni.authorize({\r\n\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res, 'success')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t_this.showSetting = true\r\n\t\t\t\t\t\tconsole.log(err, 'err')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.historyList = await this.getHistory()\r\n\t\t\t\tthis.toScroll()\r\n\t\t\t\tthis.creatConnect()\r\n\t\t\t\t// this.initRecord()\r\n\r\n\t\t\t},\r\n\t\t\topenSeepking() {\r\n\t\t\t\tthis.enableSpeeking = !this.enableSpeeking\r\n\t\t\t},\r\n\t\t\ttoInput() {\r\n\t\t\t\tthis.showRecord = false\r\n\t\t\t},\r\n\t\t\ttoVoice() {\r\n\t\t\t\tthis.showRecord = true\r\n\t\t\t},\r\n\t\t\tdoSend(e, text) {\r\n\t\t\t\t// console.log(text);\r\n\t\t\t\tif (e.ctrlKey && e.keyCode === 13) {\r\n\t\t\t\t\t//用户点击了ctrl+enter触发\r\n\t\t\t\t\tthis.ques += '\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//用户点击了enter触发    执行一些逻辑方法\r\n\t\t\t\t\tif (e !== undefined) {\r\n\t\t\t\t\t\t//发送消息的方法\r\n\t\t\t\t\t\tthis.sendQuestion();\r\n\t\t\t\t\t\t// 阻止浏览器默认的敲击回车换行的方法\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlegal() {\r\n\t\t\t\tif (this.age) {\r\n\t\t\t\t\tif (!Number(this.age)) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"输入不合法，请输入大于18的数字。\",\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetHistory() {\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tlet url = \"/ai/chat/histories?id=\" + _this.historyId\r\n\t\t\t\t\t_this.$request(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tlet newArr = res.data.reverse()\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\t_this.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewArr = _this.handleList(newArr)\r\n\t\t\t\t\t\t\tresolve(newArr)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetMoreHistory() {\r\n\t\t\t\tif (!this.loadAllHistory) {\r\n\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\tlet url = \"/ai/chat/histories?id=\" + this.historyId\r\n\t\t\t\t\tthis.$request(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tlet resArr = res.data.reverse()\r\n\t\t\t\t\t\t\tlet newArr = this.handleList(resArr)\r\n\t\t\t\t\t\t\tthis.historyList = newArr.concat(this.historyList)\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\tthis.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.loadAllHistory = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"已加载全部\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 给聊天记录添加字段\r\n\t\t\thandleList(arr) {\r\n\t\t\t\tlet len = arr.length\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tif (arr[i].msg_type == \"voice\") {\r\n\t\t\t\t\t\t// 语音记录，添加是否播放状态,默认为false\r\n\t\t\t\t\t\tarr[i].voice.anmitionPlay = false\r\n\t\t\t\t\t\tarr[i].showTranlate = false\r\n\t\t\t\t\t\tarr[i].showTranIcon = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"arr:\", arr)\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\ttoScroll() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tconsole.log(123)\r\n\t\t\t\t\tif (_this.qaList.length == 0) {\r\n\t\t\t\t\t\tvar num = _this.historyList.length - 1;\r\n\t\t\t\t\t\tif (num >= 0) {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t_this.scrollView = \"his\" + num\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar num2 = _this.qaList.length - 1;\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t_this.scrollView = \"qa\" + num2\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t\t\t// this.scrollView = this.hold\r\n\t\t\t\t\t\t// console.log(this.scrollView)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(_this.scrollView, \"scrollView\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsendQuestion() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.curStrIndex = 0;\r\n\t\t\t\tif (!this.ques) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"想了解什么工作，请告诉我吧\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t\tif (this.canSend) {\r\n\r\n\t\t\t\t\t\tthis.canSend = false;\r\n\t\t\t\t\t\tvar showData = {\r\n\t\t\t\t\t\t\tcontent: this.ques,\r\n\t\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\t\tmsg_type: \"text\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.send(this.ques, showData, \"\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreatConnect() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tif (this.connected || this.connecting) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tthis.connecting = true\r\n\t\t\t\tconsole.log(app.globalData.wssUrl, \"wss\")\r\n\t\t\t\tthis.socketTask = uni.connectSocket({\r\n\t\t\t\t\turl: app.globalData.wssUrl,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t\t\"app-id\": urlSetting.urls.appid,\r\n\t\t\t\t\t\t\"open-id\": uni.getStorageSync(\"openid\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t// 这里是接口调用成功的回调，不是连接成功的回调，请注意\r\n\t\t\t\t\t\tconsole.log(\"链接成功\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: err.errMsg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 这里是接口调用失败的回调，不是连接失败的回调，请注意\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.connect()\r\n\t\t\t\tconsole.log(this.socketTask, \"socketTask\");\r\n\t\t\t},\r\n\t\t\tconnect() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.socketTask.onOpen((res) => {\r\n\t\t\t\t\tthis.connecting = false\r\n\t\t\t\t\tthis.connected = true\r\n\t\t\t\t\tthis.noInput()\r\n\r\n\t\t\t\t\tconsole.log('onOpen', res);\r\n\t\t\t\t})\r\n\t\t\t\tthis.socketTask.onError((err) => {\r\n\t\t\t\t\tthis.connecting = false\r\n\t\t\t\t\tthis.connected = false\r\n\t\t\t\t\tthis.canSend = true\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t// \tcontent: '连接失败，请稍后再试',\r\n\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tconsole.log('onError', err);\r\n\t\t\t\t\tthis.creatConnect()\r\n\t\t\t\t})\r\n\t\t\t\tthis.socketTask.onMessage((res) => {\r\n\t\t\t\t\tlet respone = JSON.parse(res.data)\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t_this.showAnswering = false\r\n\t\t\t\t\tconsole.log(respone, \"respone\")\r\n\t\t\t\t\tif (respone.code == 0) {\r\n\t\t\t\t\t\tif (respone.data.content != \"pong\" && respone.data.content) {\r\n\t\t\t\t\t\t\t_this.qaList.push(respone.data)\r\n\t\t\t\t\t\t\t_this.toScroll();\r\n\t\t\t\t\t\t\tif (_this.enableSpeeking) {\r\n\t\t\t\t\t\t\t\t_this.formatResultStr(respone.data.content)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: respone.msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.resetData()\r\n\t\t\t\t})\r\n\t\t\t\tthis.socketTask.onClose((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tthis.connected = false\r\n\t\t\t\t\tthis.socketTask = false\r\n\t\t\t\t\tconsole.log('onClose', res)\r\n\t\t\t\t\tclearInterval(_this.timer)\r\n\t\t\t\t\tthis.creatConnect()\r\n\t\t\t\t\t// let data = {\r\n\t\t\t\t\t// \tcontent: \"链接已关闭，如需重新对话，请重新打开窗口。\",\r\n\t\t\t\t\t// \torigin: \"system\",\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// this.qaList.push(data)\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log('task', this.socketTask)\r\n\t\t\t},\r\n\t\t\tresetData() {\r\n\t\t\t\tthis.canSend = true\r\n\t\t\t\tthis.placeHolder = \"想了解什么工作，请告诉我吧\"\r\n\t\t\t\tthis.cancelRecord = false\r\n\t\t\t},\r\n\t\t\t// 间隔一定时间判断用户是否没有输入\r\n\t\t\tnoInput() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.timer = setInterval(function() {\r\n\t\t\t\t\tlet data = \"ping\"\r\n\t\t\t\t\t_this.send(data, \"\", \"\")\r\n\t\t\t\t}, 10000)\r\n\t\t\t},\r\n\t\t\tformatResultStr(str) {\r\n\t\t\t\tif (str) {\r\n\t\t\t\t\tthis.speeking(str)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeeking(str) {\r\n\t\t\t\tconsole.log(str, \"播报内容\")\r\n\t\t\t\tplugin.textToSpeech({\r\n\t\t\t\t\tlang: \"zh_CN\",\r\n\t\t\t\t\tcontent: str,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.retcode == 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"result\", res.result)\r\n\t\t\t\t\t\t\twx.playBackgroundAudio({\r\n\t\t\t\t\t\t\t\tdataUrl: res.filename,\r\n\t\t\t\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.warn(\"翻译失败\", res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log(\"网络失败\", res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsend(data, param, type) {\r\n\t\t\t\tlet _this = this\r\n\r\n\t\t\t\tthis.socketTask.send({\r\n\t\t\t\t\tdata: type == \"voice\" ? data : JSON.stringify({\r\n\t\t\t\t\t\tcontent: data\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(data, \"data\")\r\n\t\t\t\t\t\tif (data != \"ping\") {\r\n\t\t\t\t\t\t\tif (!_this.cancelRecord) {\r\n\t\t\t\t\t\t\t\t_this.showAnswering = true\r\n\t\t\t\t\t\t\t\t_this.qaList.push(param)\r\n\t\t\t\t\t\t\t\t_this.num++\r\n\t\t\t\t\t\t\t\t_this.hold = \"h\" + _this.num\r\n\t\t\t\t\t\t\t\t_this.toScroll()\r\n\t\t\t\t\t\t\t\t_this.ques = \"\";\r\n\t\t\t\t\t\t\t\t_this.placeHolder = \"正在回答中，请稍后...\"\r\n\t\t\t\t\t\t\t\t_this.qaListLen = _this.qaList.length\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tif (this.socketTask && this.socketTask.close) {\r\n\t\t\t\t\t// this.send('{\"type\":\"close\"}');\r\n\t\t\t\t\tthis.socketTask.close()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.showWanner = false\r\n\t\t\t\tthis.toScroll()\r\n\t\t\t},\r\n\t\t\tnoPosition() {\r\n\t\t\t\tthis.showReAuth = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.single_page {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tbackground: url($back-ground-url+\"/worker/welcome_pink.png\") no-repeat;\r\n\t\tbackground-size: cover;\r\n\t\tposition: relative;\r\n\r\n\t\t.intro {\r\n\t\t\twidth: 75%;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translate(-50%, -50%);\r\n\r\n\t\t\t.title {\r\n\t\t\t\tmargin-bottom: 27rpx;\r\n\r\n\t\t\t\t.tit {\r\n\t\t\t\t\tfont-family: YEFONTTangYingHei;\r\n\t\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tline-height: 65rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.text {\r\n\t\t\t\tfont-family: PingFangSC, PingFang SC;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tfont-size: 31rpx;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t\tline-height: 60rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.btn {\r\n\t\t\t\tbackground: linear-gradient(136deg, #FFFFFF 0%, #FFE8C2 100%);\r\n\t\t\t\tbox-shadow: 0rpx 4rpx 8rpx 0rpx rgba(78, 28, 100, 0.43);\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tfont-family: STHeiti;\r\n\t\t\t\tfont-size: 35rpx;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t\theight: 88rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 88rpx;\r\n\t\t\t\tletter-spacing: 1px;\r\n\t\t\t\tmargin-top: 80rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 48rpx;\r\n\t\t\t\t\tmargin-left: 34rpx;\r\n\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.voice_icon {\r\n\t\theight: 34rpx;\r\n\t\twidth: 34rpx;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: 100%;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.voice_icon_right {\r\n\t\tbackground-image: url($back-ground-url+'/worker/voice-left-3.png');\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.voice_icon_right_an {\r\n\t\tanimation: voiceAn_right 1s linear alternate infinite;\r\n\t}\r\n\r\n\t@keyframes voiceAn_right {\r\n\t\t0% {\r\n\t\t\tbackground-image: url($back-ground-url+'/worker/voice-left-1.png');\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\tbackground-image: url($back-ground-url+'/worker/voice-left-2.png');\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbackground-image: url($back-ground-url+'/worker/voice-left-3.png');\r\n\t\t}\r\n\t}\r\n\r\n\t/* 定义过渡效果 */\r\n\t.fade-enter-active,\r\n\t.fade-leave-active {\r\n\t\ttransition: opacity 1s;\r\n\t}\r\n\r\n\t.fade-enter,\r\n\t.fade-leave-to {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.inputing {\r\n\t\tposition: fixed;\r\n\t\t// top: 50%;\r\n\t\t// left: 50%;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 110;\r\n\t\tbackground: rgba(0, 0, 0, .7);\r\n\r\n\t\ttext {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t&>image {\r\n\t\t\twidth: 80%;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 35%;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translate(-50%, -50%);\r\n\t\t}\r\n\r\n\t\t.bot_bg {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: -10px;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-align: center;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t.text {\r\n\t\t\t\tfont-size: 29rpx;\r\n\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin: 30rpx 0;\r\n\t\t\t}\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t::-webkit-input-placeholder {\r\n\t\tfont-weight: 400;\r\n\t\tfont-size: 27rpx;\r\n\t\tcolor: #9E9E9E;\r\n\t}\r\n\r\n\t::v-deep {\r\n\r\n\t\t.input-value-border,\r\n\t\t.input-value {\r\n\t\t\tborder: none !important;\r\n\t\t\theight: 84rpx !important;\r\n\t\t\tfont-size: 28rpx !important;\r\n\t\t}\r\n\t}\r\n\r\n\t.ai_inner {\r\n\t\toverflow: scroll;\r\n\t}\r\n\r\n\t.ai_icon {\r\n\t\tposition: fixed;\r\n\t\tbottom: 25%;\r\n\t\tright: 10rpx;\r\n\t\tz-index: 100;\r\n\r\n\t\timage {\r\n\t\t\twidth: 120rpx;\r\n\t\t\t// height: 90rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.ai_chat {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\t// position: fixed;\r\n\t\t// top: 0;\r\n\t\t// left: 0;\r\n\t\t// right: 0;\r\n\t\t// bottom: 0;\r\n\t\t// background: rgba(0, 0, 0, .6);\r\n\t\t// z-index: 105;\r\n\r\n\t\t.auth {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tbackground: #fff;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\twidth: 48%;\r\n\t\t\t\theight: 70rpx;\r\n\t\t\t\tline-height: 70rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbackground: #f6f6f6;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.sure {\r\n\t\t\t\tbackground: $base-color;\r\n\t\t\t\tborder: 1px solid $base-color;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.ai_inner {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground: #fff;\r\n\t\t\tborder-top-left-radius: 16rpx;\r\n\t\t\tborder-top-right-radius: 16rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\t// position: absolute;\r\n\t\t\t// left: 0;\r\n\t\t\t// bottom: 0;\r\n\r\n\t\t\t.full_header {\r\n\t\t\t\tbackground: url($back-ground-url+\"/worker/chat_top_bg.png\") no-repeat;\r\n\t\t\t\tbackground-size: cover;\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tz-index: 105;\r\n\r\n\r\n\t\t\t\t.page_top {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tleft: 30rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t.ques_wrap {\r\n\t\twidth: calc(100% - 80rpx);\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 40rpx;\r\n\t\tmax-width: 700px;\r\n\t\t// border: 1px solid $base-color;\r\n\t\t// border-bottom: 1px solid #04babe;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 10rpx;\r\n\t\tmargin: 0 auto;\r\n\t\t// padding: 0 16rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tz-index: 100;\r\n\r\n\t\t&.upper {\r\n\t\t\tposition: fixed;\r\n\t\t\twidth: 100%;\r\n\t\t\tleft: 0;\r\n\t\t\tz-index: 105;\r\n\t\t}\r\n\r\n\t\t.input {\r\n\t\t\theight: 100%;\r\n\r\n\r\n\r\n\t\t\t.input_right {\r\n\t\t\t\twidth: calc(100% - 50rpx);\r\n\r\n\t\t\t\tinput {\r\n\t\t\t\t\twidth: calc(100% - 126rpx);\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tborder-radius: 42rpx;\r\n\t\t\t\t\tbox-shadow: 0 2rpx 7rpx 0rpx #DDDDDD;\r\n\t\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t\t\t// text-align: center;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.confirm_send {\r\n\t\t\t\t\twidth: 110rpx;\r\n\t\t\t\t\theight: 62rpx;\r\n\t\t\t\t\tline-height: 62rpx;\r\n\t\t\t\t\tbackground: linear-gradient(135deg, #4F86FD 0%, #71BAFF 100%);\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\tfont-size: 29rpx;\r\n\t\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\t\tmargin-left: 16rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t.btn {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 100%;\r\n\t\t\t\tborder-radius: 42rpx;\r\n\t\t\t\tfont-size: 29rpx;\r\n\t\t\t\tbox-shadow: 0 2rpx 7rpx 0rpx #DDDDDD;\r\n\r\n\t\t\t\t&.press {\r\n\t\t\t\t\twidth: calc(100% - 50rpx);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 30px;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.imgs {\r\n\t\t\t\timage {\r\n\t\t\t\t\tmargin-left: 20rpx;\r\n\r\n\t\t\t\t\t&:nth-child(2) {\r\n\t\t\t\t\t\twidth: 26px;\r\n\t\t\t\t\t\theight: 26px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.chat_wrap {\r\n\t\tpadding: 40rpx 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #F4F9FF;\r\n\r\n\t\t.list {\r\n\t\t\t// padding: 30rpx;\r\n\r\n\t\t\t.qa_item {\r\n\t\t\t\t.line {\r\n\t\t\t\t\tmargin-top: 41rpx;\r\n\t\t\t\t\ttext-align: right;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.inline_box {\r\n\t\t\t\t\t\twidth: calc(100% - 85rpx);\r\n\r\n\t\t\t\t\t\t&>image {\r\n\t\t\t\t\t\t\twidth: 65rpx;\r\n\t\t\t\t\t\t\theight: 65rpx;\r\n\t\t\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\t\t\tvertical-align: top;\r\n\t\t\t\t\t\t\tmargin-left: 0;\r\n\t\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.cont {\r\n\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\t// max-width: calc(100% - 110rpx);\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\tline-height: 42rpx;\r\n\t\t\t\t\t\t\t// color: #fff;\r\n\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\tfont-family: \"微软雅黑\";\r\n\t\t\t\t\t\t\t// background: #106afa;\r\n\t\t\t\t\t\t\ttext-align: left;\r\n\r\n\t\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.left {\r\n\t\t\t\t\t\t.inline_box {\r\n\t\t\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\t\t\talign-items: start;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttext-align: left;\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.cont {\r\n\t\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.right {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tjustify-content: flex-end;\r\n\r\n\t\t\t\t\t\t.inline_box {\r\n\t\t\t\t\t\t\talign-items: start;\r\n\t\t\t\t\t\t\tjustify-content: flex-end;\r\n\r\n\t\t\t\t\t\t\t.cont {\r\n\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\t\t\toverflow: visible;\r\n\r\n\t\t\t\t\t\t\t\t&.textcont {\r\n\t\t\t\t\t\t\t\t\twidth: auto;\r\n\t\t\t\t\t\t\t\t\tmax-width: 100%;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// display: flex;\r\n\t\t\t\t\t\t\t\t// justify-content: flex-end;\r\n\t\t\t\t\t\t\t\t// flex-wrap: wrap;\r\n\t\t\t\t\t\t\t\t// align-items: center;\r\n\r\n\t\t\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\t\t\tbackground: linear-gradient(117deg, #4F85FD 0%, #72BAFF 100%);\r\n\t\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t.trans {\r\n\t\t\t\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\t\t\t\twidth: 120rpx !important;\r\n\t\t\t\t\t\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\t\t\t\t\t\tmargin-left: 0;\r\n\t\t\t\t\t\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// position: absolute;\r\n\t\t\t\t\t\t\t\t\t// bottom: 100%;\r\n\t\t\t\t\t\t\t\t\t// right: 0;\r\n\t\t\t\t\t\t\t\t\t// background: #e4f2fd;\r\n\t\t\t\t\t\t\t\t\t// width: 68rpx;\r\n\t\t\t\t\t\t\t\t\t// height: 68rpx;\r\n\t\t\t\t\t\t\t\t\t// line-height: 68rpx;\r\n\t\t\t\t\t\t\t\t\t// text-align: center;\r\n\t\t\t\t\t\t\t\t\t// border-radius: 50%;\r\n\t\t\t\t\t\t\t\t\t// // padding: 6rpx 10rpx;\r\n\t\t\t\t\t\t\t\t\t// font-size: 26rpx;\r\n\t\t\t\t\t\t\t\t\t// color: #0548fd;\r\n\t\t\t\t\t\t\t\t\t// z-index: 130;\r\n\t\t\t\t\t\t\t\t\t// transform: translateY(-3px);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.voice_wrap {\r\n\r\n\t\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\t\tbackground: linear-gradient(117deg, #4F85FD 0%, #72BAFF 100%);\r\n\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\t\t\twidth: 20rpx !important;\r\n\t\t\t\t\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t\t\t\t\t\tflex-shrink: 0;\r\n\r\n\t\t\t\t\t\t\t\t\t&.gif {\r\n\t\t\t\t\t\t\t\t\t\twidth: 50rpx !important;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.trans_result {\r\n\t\t\t\t\t\t\t\t// width: 100%;\r\n\t\t\t\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t\t\t\t// display: block;\r\n\t\t\t\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\t\t// flex-shrink: 0;\r\n\t\t\t\t\t\t\t\tfloat: right;\r\n\r\n\t\t\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\t\t\twidth: 80rpx;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// .cont {\r\n\t\t\t\t\t\t// \tbackground: linear-gradient(117deg, #4F85FD 0%, #72BAFF 100%);\r\n\t\t\t\t\t\t// \tcolor: #fff;\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test_chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test_chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1726016827593\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}