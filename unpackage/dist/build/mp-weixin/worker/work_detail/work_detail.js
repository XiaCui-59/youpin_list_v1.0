(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["worker/work_detail/work_detail"],{"0bd5":function(e,t,o){"use strict";o.r(t);var n=o("32bd"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},"32bd":function(e,t,o){"use strict";(function(e,n){var i=o("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(o("7eb4")),r=i(o("ee10")),s=i(o("7ca3")),c=i(o("585c")),l=o("8f59");function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,s.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var h=getApp(),f={data:function(){return{canvasShow:!1,canvasWidth:h.globalData.systemWidth,canvasHeight:.8*h.globalData.systemWidth,showLogin:!1,mobile:"",age:"",nation:"",name:"",gender:"",genderList:[{value:"male",text:"男"},{value:"female",text:"女"}],showFormModal:!1,item:{highlight:["包吃住","包吃住","包吃住","包吃住","包吃住","包吃住","包吃住","包吃住","包吃住"]},period:c.default.periodList,ifSingle:1154==h.globalData.scene,imgUrl:h.globalData.baseImageUrl,marginTop:h.globalData.marginTop,tabMargin:h.globalData.tabMargin,systemHeight:h.globalData.systemHeight,id:"",workInfo:{id:"",name:"",gender:"",min_age:0,max_age:0,min_salary:0,max_salary:0,worker_salary_type:"",province:"",city:"",district:"",address:"",latitude:0,longitude:0,payroll_cycle:"",payroll_detail:{monthly:{day:3}},description:"   ",videos:[],images:[],no_interview:!1},markers:[{id:1,latitude:30.6555,longitude:104.07721,iconPath:"https://static.test.swiftwd.com/worker/v_list/location.png",width:"25rpx",height:"34rpx"}],contMinHeight:0,qrcode:"",getPhoneData:{},applied:!1,shareImg:"",poster:{css:{width:""},views:[]},wantToChat:!1}},components:{login:function(){o.e("components/login").then(function(){return resolve(o("dadd"))}.bind(null,o)).catch(o.oe)}},computed:d({},(0,l.mapState)(["workerInfo","loginStatus"])),onShareAppMessage:function(){return{title:"您的好友给您推荐了一条优质工作信息，点击查看",path:"/worker/work_detail/work_detail?id="+this.id,imageUrl:this.shareImg}},onLoad:function(e){this.id=e.id,this.getInfo(),this.contMinHeight=h.globalData.systemHeight-this.marginTop-this.tabMargin,this.workerInfo&&(this.name=this.workerInfo.name?this.workerInfo.name:"",this.age=this.workerInfo.age?this.workerInfo.age:"",this.nation=this.workerInfo.nation?this.workerInfo.nation:"",this.gender=this.workerInfo.gender?this.workerInfo.gender:""),this.isLogin()&&this.getSignStatus()},onShow:function(){console.log("ifSingle",this.ifSingle),this.ifSingle||this.isLogin()},methods:d(d({},(0,l.mapMutations)(["updateLoginStatus","updateOpenid","setToken"])),{},{viewHaibao:function(){var e=this;this.poster.views=[{type:"image",src:h.globalData.baseImageUrl+"/worker/v_list/share_card_bg.png?time="+(new Date).getTime(),css:{width:"100%",margin:"0 auto"}},{type:"view",css:{width:"70%",position:"absolute",top:"24%",left:"50%",transform:"translateX(-50%)",boxSizing:"border-box",textAlign:"center",overflow:"hidden"},views:[{type:"text",text:e.workInfo.name.slice(0,10),css:{width:"100%",boxSizing:"border-box",fontSize:"50rpx",color:"#001326",fontFamily:"miaozi",padding:"10px 0",borderBottom:"1px dotted #50A9FF",textShadow:"0px 3px 0px #FFFFFF",display:"block"}},{type:"text",text:Math.floor(e.workInfo.max_salary)==Math.floor(e.workInfo.min_salary)?Math.floor(e.workInfo.max_salary):Math.floor(e.workInfo.min_salary)+"-"+Math.floor(e.workInfo.max_salary)+"元"+e.period.filter((function(t){return t.value==e.workInfo.worker_salary_type}))[0].text,css:{fontSize:"60rpx",color:"#FF7E13",fontFamily:"yezi",textShadow:"0px 4px 2px #000000",display:"block",margin:"6px 0 3px 0"}},{type:"text",text:e.workInfo.keywords.length>0?e.workInfo.keywords[0]+(e.workInfo.keywords[1]?"，"+e.workInfo.keywords[1]:""):"",css:{fontSize:"40rpx",color:"#1E1A16",display:"block"}}]}],console.log("poster：",this.poster),this.$nextTick((function(){e.$refs.painter.canvasToTempFilePathSync({fileType:"jpg",pathType:"url",quality:1,success:function(t){e.shareImg=t.tempFilePath,console.log("canvasToTempFilePathSync：",t)},fail:function(e){console.log(e,"err")}})}))},getProfile:function(){this.wantToChat&&this.toChat()},getSignStatus:function(){var e=this,t="/worker/jobs/"+this.id+"/applied";this.$request(t).then((function(t){0==t.code&&(e.applied=t.data.applied)}))},leftClick:function(){var t=getCurrentPages();t.length>1?e.navigateBack():e.switchTab({url:"/pages/worker_index/worker_index"})},closeLogin:function(){this.showLogin=!1},addQun:function(){e.navigateTo({url:"/worker/webview/webview"})},toChat:function(){this.wantToChat=!0,this.isLogin()?e.navigateTo({url:"/worker/worker_chat/worker_chat?id="+this.id,success:function(){this.wantToChat=!1}}):this.showLogin=!0},getInfo:function(){var e=this,t="/jobs/"+this.id;this.$request(t).then((function(t){0==t.code&&(e.workInfo=t.data,e.markers.longitude=t.data.longitude,e.markers.latitude=t.data.latitude,e.viewHaibao())}))},changeGender:function(e){this.gender=e.value},openForm:function(){this.showFormModal=!0},makePhoneCall:function(){this.$store.dispatch("makePhoneCall")},handleMapClick:function(){e.openLocation({latitude:this.workInfo.latitude,longitude:this.workInfo.longitude,address:this.workInfo.address,success:function(){console.log("success")}})},cancelForm:function(){this.showFormModal=!1},confirmForm:function(){var t=this;if(this.name)if(this.gender)if(this.age)if(this.nation)if(this.workerInfo.mobile){var o={gender:this.gender,name:this.name,ethnicity:this.nation,age:Number(this.age),job_id:this.id};this.$request("/worker/enrollment",o,"POST").then((function(o){0==o.code&&(t.cancelForm(),e.showToast({title:"报名成功",icon:"none"}),t.getSignStatus())}))}else e.showToast({title:"请获取手机号",icon:"error"});else e.showToast({title:"请填写民族",icon:"error"});else e.showToast({title:"请填写年龄",icon:"error"});else e.showToast({title:"请选择性别",icon:"error"});else e.showToast({title:"请填写姓名",icon:"error"})},openKefu:function(){n.openCustomerServiceChat({extInfo:{url:"https://work.weixin.qq.com/kfid/kfc01b1c6e379607409"},corpId:"wwe3ced2e65390ad79",success:function(e){},fail:function(t){console.log(t),e.showToast({title:"请稍后重试",icon:"none"})}})},getCode:function(){var e=this;this.$request("/employer/wechat/official-account/subscribe-qrcode").then((function(t){0==t.code&&(e.qrcode=t.data.qrcode,e.open())}))},confirm:function(){this.$refs.pubModal.close()},getOpenid:function(){var t=this;return new Promise((function(o){e.login({success:function(n){if("login:ok"==n.errMsg){var i={code:n.code,share_id:""};t.$request("/auth/ai-wechat/mini/openid",i,"POST").then((function(n){0==n.code&&(console.log("open_id:",n.data.open_id),e.setStorageSync("openid",n.data.open_id),t.updateOpenid(n.data.open_id),o(n.data.open_id))}))}},fail:function(e){console.log(e)}})}))},getPhoneNumber:function(t){var o=this;return(0,r.default)(a.default.mark((function n(){var i,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i="",r=o,console.log(t,"getPhoneNumber"),e.showLoading(),o.closeLogin(),!e.getStorageSync("openid")){n.next=9;break}o.getPhoneData.open_id=e.getStorageSync("openid"),n.next=12;break;case 9:return n.next=11,o.getOpenid();case 11:o.getPhoneData.open_id=n.sent;case 12:"getPhoneNumber:ok"==t.detail.errMsg?(console.log(t.detail,"e.detail"),o.getPhoneData.encrypted_data=t.detail.encryptedData,o.getPhoneData.iv=t.detail.iv,o.getPhoneData.code=t.detail.code,i="/auth/ai-wechat/worker/login",r.$request(i,o.getPhoneData,"POST").then((function(t){0==t.code&&(r.setToken(t.data.token),e.setStorageSync("token",t.data.token),e.setStorageSync("loginStatus","in"),r.updateLoginStatus(),r.$store.dispatch("getWorkerInfo")),e.hideLoading()}))):e.hideLoading();case 13:case"end":return n.stop()}}),n)})))()}})};t.default=f}).call(this,o("df3c")["default"],o("3223")["default"])},"51d9":function(e,t,o){"use strict";(function(e,t){var n=o("47a9");o("2591");n(o("3240"));var i=n(o("ce3d"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"8a7b":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={uNavbar:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(o.bind(null,"8e7b"))},uIcon:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(o.bind(null,"228d"))},uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,"e8b5"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,"4745"))},lPainter:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/lime-painter/components/l-painter/l-painter")]).then(o.bind(null,"5b16"))}},i=function(){var e=this,t=e.$createElement,o=(e._self._c,e.ifSingle?null:e.period.filter((function(t){return t.value==e.workInfo.worker_salary_type}))),n=e.ifSingle?null:e.workInfo.keywords&&0!=e.workInfo.keywords.length;e.$mp.data=Object.assign({},{$root:{g0:o,g1:n}})},a=[]},"90c5":function(e,t,o){},9749:function(e,t,o){"use strict";var n=o("90c5"),i=o.n(n);i.a},ce3d:function(e,t,o){"use strict";o.r(t);var n=o("8a7b"),i=o("0bd5");for(var a in i)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(a);o("9749");var r=o("828b"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"5ab72238",null,!1,n["a"],void 0);t["default"]=s.exports}},[["51d9","common/runtime","common/vendor"]]]);