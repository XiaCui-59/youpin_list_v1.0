(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/welcome"],{"3f7f":function(t,e,r){"use strict";var n=r("91df"),a=r.n(n);a.a},"6b22":function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var n={uScrollList:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-scroll-list/u-scroll-list")]).then(r.bind(null,"5f9e"))}},a=function(){var t=this,e=t.$createElement,r=(t._self._c,t.workType.slice(1)),n=t.__map(t.jobList,(function(e,r){var n=t.__get_orig(e),a=t.period.filter((function(t){return t.value==e.salary_type})),i=e.highlight&&0!=e.highlight.length,o=i?e.highlight.length:null,s=i?t.__map(e.highlight.slice(0,3),(function(r,n){var a=t.__get_orig(r),i=e.highlight.length;return{$orig:a,g3:i}})):null;return{$orig:n,g0:a,g1:i,g2:o,l1:s}}));t._isMounted||(t.e0=function(e,r){var n=arguments[arguments.length-1].currentTarget.dataset,a=n.eventParams||n["event-params"];r=a.item;return e.stopPropagation(),t.toList(r)}),t.$mp.data=Object.assign({},{$root:{l0:r,l2:n}})},i=[]},"8cda":function(t,e,r){"use strict";r.r(e);var n=r("6b22"),a=r("e9c4");for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("3f7f");var o=r("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=s.exports},"91df":function(t,e,r){},"94b6":function(t,e,r){"use strict";(function(t){var n=r("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r("7eb4")),i=n(r("ee10")),o=n(r("7ca3")),s=n(r("5645")),c=r("8f59");function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){(0,o.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d=getApp(),m={name:"welcome",props:["top","bottom","canPlay","showUserStep"],data:function(){return{menuList:[{title:"酒店连锁",text:"酒店连锁"},{title:"餐饮服务",text:"酒店连锁"},{title:"物流行业",text:"酒店连锁"},{title:"工厂用工",text:"酒店连锁"},{title:"兼职",text:"酒店连锁"}],jobList:[{project_name:"酒店保洁",worker_salary_min:3e3,worker_salary_max:5e3,worker_salary_type:"month",highlight:["包吃住","长白班","有社保"],worker_address:{address:"四川成都"}},{project_name:"酒店保洁",worker_salary_min:3e3,worker_salary_max:5e3,worker_salary_type:"month",highlight:["包吃住","长白班","有社保"],worker_address:{address:"四川成都"}}],showSureJob:!1,scrollTop:0,period:s.default.periodList,current:0,dots:2,imgUrl:d.globalData.baseImageUrl,recommendList:[],currentPlay:{project_id:"",content:"",may_ask:[],project_name:"",voice:"",worker_salary_max:"",worker_salary_min:"",worker_salary_type:""},currentPlayIndex:0,muted:!1,systemHeight:d.globalData.systemHeight,animationActive:!0,animationTimer:null,welcomeVoiceList:[d.globalData.baseImageUrl+"/worker/wel01.mp3",d.globalData.baseImageUrl+"/worker/wel02.mp3",d.globalData.baseImageUrl+"/worker/wel03.mp3"],lastClickTime:0,requestTimer:null,reConnectCount:0,mayAskCount:0,bannerImageInfo:null,bannerHeight:0,currentStep:1,firstEnd:!1,isWelcome:!0,clickProject:{project_id:"",content:"",may_ask:[],project_name:"",voice:"",worker_salary_max:"",worker_salary_min:"",worker_salary_type:""},bodyStartPoint:null,moveUp:!1}},computed:u({},(0,c.mapState)(["city","aiReady","workType","audioSwitch"])),created:function(){this.getHotProjects()},watch:{},methods:{getHotProjects:function(){var t=this;this.$request("/guest/recommend-jobs").then((function(e){0==e.code&&(t.jobList=e.data.list.slice(0,2))}))},toInvite:function(){},toChat:function(t,e){var r={msg:"",type:""};r=t?{msg:"我正在找工作，能帮我推荐一些合适的职位吗？",type:""}:{type:"",msg:"我想继续了解一下"+e.name+"(ID:"+e.id+")这个工作。"},this.$emit("sendMsg",r)},toCall:function(t){var e={type:t,job_id:"surejob"==t?this.currentPlay.project_id:""};this.$emit("tocall",e)},nextStep:function(){this.currentStep<6?this.currentStep++:(t.setStorageSync("readsteps",1),this.canPlay&&this.playWelcome(),this.$emit("closeStep"))},changeNext:function(){var t=this.recommendList.length;if(this.currentPlayIndex==t-1){this.$emit("sendMsg",{msg:"我正在找工作，能帮我推荐一些合适的职位吗？",type:"",job_id:""})}else d.globalData.Audio.stop(),this.playNext()},playFirst:function(){this.firstEnd=!0,this.isWelcome=!1,this.canPlay&&!this.muted&&this.playAudio()},playNext:function(){var t=this,e=this.recommendList.length;this.currentPlayIndex<e-1?(this.currentPlayIndex++,this.currentPlay=this.recommendList[this.currentPlayIndex]):(this.currentPlayIndex=0,this.currentPlay=this.recommendList[this.currentPlayIndex],this.currentPlayIndex++),setTimeout((function(){t.canPlay&&!t.muted&&t.playAudio()}),50)},stopInterval:function(){this.animationTimer&&(clearInterval(this.animationTimer),this.animationTimer=null,this.scrollTop=0)},handleAudio:function(){this.$emit("openCanPlay"),d.globalData.Audio.paused?this.playAudio():this.pauseAudio()},playAudio:function(){this.canPlay&&(d.globalData.Audio.src=this.currentPlay.voice,d.globalData.Audio.play(),this.muted=!1)},toPro:function(){t.navigateTo({url:"/subpkg/project_list/project_list"})},playWelcome:function(){var t=Math.floor(Math.random()*this.welcomeVoiceList.length);d.globalData.Audio.src=this.welcomeVoiceList[t],d.globalData.Audio.play(),this.muted=!1},stopAudio:function(){d.globalData.Audio.src="",d.globalData.Audio.stop()},pauseAudio:function(){d.globalData.Audio.pause(),this.muted=!0},toList:function(e){t.navigateTo({url:"/subpkg/project_list/project_list?type="+JSON.stringify(e)})},getMayAsk:function(){var t=this;return(0,i.default)(a.default.mark((function e(){var r,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/homepage/may_ask/"+t.currentPlay.project_id,e.prev=1,e.next=4,t.$request(r);case 4:n=e.sent,t.currentPlay.may_ask=n.data.list.may_ask,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.mayAskCount<5?(t.getMayAsk(),t.mayAskCount++):t.mayAskCount=0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getRecommend:function(){var e=this;return(0,i.default)(a.default.mark((function r(){var n,i,o;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e,i={city:e.city},r.prev=2,r.next=5,e.$request("/homepage",i,"POST");case 5:o=r.sent,e.$emit("setGreetStatus"),o.data.list.length>0?(e.currentPlay=o.data.list[0],e.recommendList=o.data.list,e.showSureJob=!0,e.getMayAsk(),!e.showUserStep&&e.canPlay&&e.playWelcome()):e.$refs.myModal.showModal({title:"暂无推荐职位信息",showCancel:!1}),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](2),console.error("An error occurred:",r.t0),n.reConnectCount<10?(n.reConnectCount++,n.getRecommend()):t.showModal({title:"网络超时，请重新进入小程序。",showCancel:!1,success:function(e){e.confirm&&(n.reConnectCount=0,t.reLaunch({url:"/subpkg/index/index"}))}});case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},sendMsg:function(t,e){this.clickProject=u({},this.currentPlay);var r={msg:this.clickProject.project_name+"（职位id："+this.clickProject.project_id+"）"+t,type:e,job_id:this.clickProject.project_id,name:this.clickProject.project_name};this.$emit("sendMsg",r)},textAnimation:function(){var t=this;t.scrollTop=0,this.animationTimer||(this.animationTimer=setInterval((function(){t.scrollTop+=2}),300))},touchStart:function(){this.animationActive=!1},scrollLower:function(){this.animationActive&&(this.scrollTop=0)}}};e.default=m}).call(this,r("df3c")["default"])},e9c4:function(t,e,r){"use strict";r.r(e);var n=r("94b6"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/welcome-create-component',
    {
        'components/welcome-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("8cda"))
        })
    },
    [['components/welcome-create-component']]
]);
