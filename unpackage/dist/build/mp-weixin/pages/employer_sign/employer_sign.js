(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/employer_sign/employer_sign"],{"05fd":function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("2c83");i(n("3240"));var o=i(n("f19b"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},2358:function(t,e,n){},2907:function(t,e,n){"use strict";n.r(e);var i=n("87f7"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"6b25":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"ac7a"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"c1bd"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.ifSingle?null:t.list.length),i=t.ifSingle?null:t.__map(t.list,(function(e,n){var i=t.__get_orig(e),o=t.workerStatus.filter((function(t){return t.value==e.application_status}));return{$orig:i,g1:o}})),o=t.ifSingle?null:t.list.length;t.$mp.data=Object.assign({},{$root:{g0:n,l0:i,g2:o}})},a=[]},"87f7":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("7eb4")),a=i(n("ee10")),r=i(n("7ca3")),c=i(n("5645")),l=n("8f59");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var u=getApp(),g={data:function(){return{ifSingle:1154==u.globalData.scene,isPulling:!1,triggered:!1,proValue:{id:"",description:"全部"},showPicker:!1,projects:[],showLogin:!1,avatar:u.globalData.baseImageUrl+"/broker/com_default.png",imgUrl:u.globalData.baseImageUrl,pageName:"工人",marginTop:u.globalData.marginTop,mainTabHeight:u.globalData.mainTabHeight,subTabHeight:u.globalData.subTabHeight,releTopHead:u.globalData.releTopHead,tabMargin:u.globalData.tabMargin,bannerHeight:u.globalData.bannerHeight,tabs:[{value:"all",text:"全部"},{value:"hired",text:"已入职"},{value:"resigned",text:"已离职"}],currentTab:{value:"all",text:"全部"},workerStatus:c.default.workerStatus,list:[],scrollHeight:0,boxTop:0,headerHeight:u.globalData.topHeight,currentPage:1,pagination:{},tabbarHeight:0}},components:{tabbar:function(){Promise.all([n.e("common/vendor"),n.e("components/tabbar")]).then(function(){return resolve(n("6fc7"))}.bind(null,n)).catch(n.oe)},customHeader:function(){n.e("components/custom_header").then(function(){return resolve(n("0c6b"))}.bind(null,n)).catch(n.oe)},login:function(){Promise.all([n.e("common/vendor"),n.e("components/employer_login")]).then(function(){return resolve(n("35b6"))}.bind(null,n)).catch(n.oe)},addName:function(){n.e("components/addName").then(function(){return resolve(n("e974"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){this.boxTop=this.marginTop+this.releTopHead+4.5*this.tabMargin+this.subTabHeight,this.scrollHeight=u.globalData.systemHeight-this.tabbarHeight-this.boxTop},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,l.mapState)(["employerInfo","nameShow","loginStatus"])),onShow:function(){var t=this;return(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isLogin()?(t.getRequireList(),t.getList()):t.showLogin=!0;case 1:case"end":return e.stop()}}),e)})))()},methods:{makePhoneCall:function(e){t.makePhoneCall({phoneNumber:e})},onPulling:function(t){console.log("onpulling",t),t.detail.deltaY<0||(this.triggered=!0)},onRefresh:function(){var t=this;this.isPulling||(this.isPulling=!0,setTimeout((function(){t.triggered=!1,t.isPulling=!1,t.getList()}),500))},onRestore:function(){this.triggered="restore"},onAbort:function(){console.error("onAbort")},depart:function(e){var n=this;t.showModal({title:"提示",content:"是否确认对员工："+e.worker_name+"进行离职操作？",confirmText:"确认离职",success:function(i){if(i.confirm){var o="/employer/jobRequirementApplication/"+e.job_application_id+"/resign";n.$request(o,{},"PATCH").then((function(e){0==e.code&&(t.showToast({title:"办理离职成功",icon:"none",duration:3e3}),n.getList())}))}}})},closePicker:function(){this.showPicker=!1},confirmProject:function(t){console.log(t),this.proValue=t.value[0],this.currentPage=1,this.getList(),this.closePicker()},openPicker:function(){this.showPicker=!0},cancelLogin:function(){this.closeLogin(),t.switchTab({url:"/pages/employer_index/employer_index"})},closeLogin:function(){this.showLogin=!1},getRequireList:function(){var t=this,e="/employer/jobRequirements?page=1&status="+this.currentTab.value;this.$request(e).then((function(e){if(0==e.code){t.projects[0]=[{id:"",description:"全部"}].concat(e.data.list)}}))},getTabbarHeight:function(t){this.tabbarHeight=t},changeTab:function(t){this.currentTab=t,this.currentPage=1,this.getList()},getMore:function(){var t=this,e="全部"==this.proValue.description?"":this.proValue.description,n="/employer/jobRequirementApplications?page="+this.currentPage+"&application_status="+this.currentTab.value+"&keyword="+e+"&requirement_status=all";this.$request(n).then((function(e){0==e.code&&(t.list=t.list.concat(e.data.list),t.pagination=e.data.pagination)}))},getList:function(){var t=this,e="全部"==this.proValue.description?"":this.proValue.description,n="/employer/jobRequirementApplications?page=1&application_status="+this.currentTab.value+"&keyword="+e+"&requirement_status=all";this.$request(n).then((function(e){0==e.code&&(t.list=e.data.list,t.pagination=e.data.pagination)}))},lower:function(){this.list.length<this.pagination.total_count?(this.currentPage++,this.getMore()):this.list.length>=this.pagination.total_count&&t.showToast({title:"已经到底啦~",icon:"none",duration:2e3})}}};e.default=g}).call(this,n("df3c")["default"])},e57f:function(t,e,n){"use strict";var i=n("2358"),o=n.n(i);o.a},f19b:function(t,e,n){"use strict";n.r(e);var i=n("6b25"),o=n("2907");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("e57f");var r=n("828b"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"8db4ecb0",null,!1,i["a"],void 0);e["default"]=c.exports}},[["05fd","common/runtime","common/vendor"]]]);