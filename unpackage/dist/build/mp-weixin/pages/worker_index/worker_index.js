(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/worker_index/worker_index"],{"30b1":function(t,e,a){"use strict";(function(t,e){var n=a("47a9");a("2591");n(a("3240"));var i=n(a("6eb5"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(i.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},"3f8a":function(t,e,a){"use strict";a.r(e);var n=a("a3fd"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"5c8f":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uNavbar:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(a.bind(null,"8e7b"))},uSwiper:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(a.bind(null,"5e79"))},uSticky:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-sticky/u-sticky")]).then(a.bind(null,"0ca7"))},uTabs:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(a.bind(null,"ec6c"))}},i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.ifSingle?null:t.selectedWorkType.length),n=t.ifSingle?null:t.jobList.length,i=t.ifSingle?null:t.__map(t.jobList,(function(e,a){var n=t.__get_orig(e),i=t.jobList.length,o=i&&e.min_salary==e.max_salary?Math.floor(e.max_salary):null,r=i&&e.min_salary!=e.max_salary?Math.floor(e.min_salary):null,l=i&&e.min_salary!=e.max_salary?Math.floor(e.max_salary):null,s=i?t.period.filter((function(t){return t.value==e.salary_type})):null,c=i?e.highlight&&0!=e.highlight.length:null;return{$orig:n,g2:i,g3:o,g4:r,g5:l,g6:s,g7:c}})),o=t.ifSingle?null:t.__map(t.allList,(function(e,a){var n=t.__get_orig(e),i=t.jobList.length,o=i?null:t.period.filter((function(t){return t.value==e.salary_type})),r=i?null:e.highlight&&0!=e.highlight.length;return{$orig:n,g8:i,g9:o,g10:r}}));t.$mp.data=Object.assign({},{$root:{g0:a,g1:n,l0:i,l1:o}})},o=[]},"6eb5":function(t,e,a){"use strict";a.r(e);var n=a("5c8f"),i=a("3f8a");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("95a1");var r=a("828b"),l=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"da29f0d6",null,!1,n["a"],void 0);e["default"]=l.exports},"81d7":function(t,e,a){},"95a1":function(t,e,a){"use strict";var n=a("81d7"),i=a.n(n);i.a},a3fd:function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("7eb4")),o=n(a("af34")),r=n(a("ee10")),l=n(a("7ca3")),s=n(a("585c")),c=a("8f59");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var g=getApp(),h={data:function(){return{showBroadcast:!1,canPlay:!0,showCascadeMask:!1,showCascade:!1,period:s.default.periodList,currentIndex2:0,tab_2_list:[{value:"recomm",label:"推荐"},{value:"near",label:"附近"}],currentIndex:0,selectedWorkType:[{value:"",label:"全部"}],allList:[],jobList:[],ifSingle:1154==g.globalData.scene,btnStatus2:!0,showMask:!1,showLogin:!1,avatar:g.globalData.baseImageUrl+"/broker/com_default.png",imgUrl:g.globalData.baseImageUrl,pageName:"灵动优聘",marginTop:g.globalData.marginTop,mainTabHeight:g.globalData.mainTabHeight,subTabHeight:g.globalData.subTabHeight,tabMargin:g.globalData.tabMargin,bannerHeight:g.globalData.bannerHeight,tabs:s.default.requireStatus,currentTab:{value:"",text:"全部"},list:[],scrollHeight:0,boxTop:0,headerHeight:g.globalData.highTopHeight,currentPage:1,allCurrentPage:1,pagination:{},allPagination:{},tabbarHeight:0,periodList:s.default.periodList,orderInfo:{available_amount:"",need_pay:""},swiperList:[g.globalData.baseImageUrl+"/worker/v_list/index_banner01.png?time="+(new Date).getTime()],currentRecord:{},systemHeight:g.globalData.systemHeight,position:null,getNear:!1,currentListType:"all"}},components:{tabbar:function(){a.e("components/worker_tabbar").then(function(){return resolve(a("4993"))}.bind(null,a)).catch(a.oe)},login:function(){a.e("components/login").then(function(){return resolve(a("dadd"))}.bind(null,a)).catch(a.oe)},customCascade:function(){a.e("components/custom_cascade").then(function(){return resolve(a("9a9a"))}.bind(null,a)).catch(a.oe)},broadcast:function(){a.e("components/broadcast").then(function(){return resolve(a("fbef"))}.bind(null,a)).catch(a.oe)}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,l.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},(0,c.mapState)(["workType"])),onLoad:function(){var t=this;return(0,r.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.boxTop=t.marginTop+t.bannerHeight+3*t.tabMargin+t.subTabHeight,t.scrollHeight=g.globalData.systemHeight-t.marginTop-t.subTabHeight-3*t.tabMargin-t.tabbarHeight-t.bannerHeight,e.next=4,t.getPosition();case 4:t.position=e.sent,console.log(t.position),t.getList(),t.getSelectWorkTypes();case 8:case"end":return e.stop()}}),e)})))()},onReady:function(){var e=this,a=t.getStorageSync("cascadeShow")?t.getStorageSync("cascadeShow"):"";a?this.showBroadcast=!0:(this.showCascadeMask=!0,setTimeout((function(){e.showCascade=!0}),1e3))},onReachBottom:function(){switch(this.currentListType){case"all":this.getAllMore();break;case"allType":this.getTypeAllMore();break;case"near":this.getMore();break;default:break}},onShow:function(){console.log("ifSingle",this.ifSingle),this.ifSingle||this.isLogin()},methods:{showSelect:function(){var t=this;this.showCascadeMask=!0,setTimeout((function(){t.showCascade=!0}),100)},sendBtnMsg:function(e){console.log(e),t.navigateTo({url:"/worker/worker_chat/worker_chat?b_id="+e.job_id+"&b_type="+e.type+"&b_msg="+e.msg+"&b_action="+(e.action?e.action:"")})},closeBroadcast:function(){this.showBroadcast=!1,this.canPlay=!1},changeSubTab:function(t,e){this.currentIndex2=e,"near"==t.value?this.getNear=!0:this.getNear=!1,this.getList()},getSelectWorkTypes:function(){var t=this;this.$request("/worker/expected-job-types").then((function(e){if(0==e.code){t.selectedWorkType=[{value:"",label:"全部"}].concat(e.data)}}))},cancelCascade:function(){var t=this;this.showCascade=!1,setTimeout((function(){t.showCascadeMask=!1}),400)},handleTabClick:function(t){this.currentTab=t,this.currentPage=1,this.getList()},handleConfirm:function(t){var e=this;console.log(t);var a={job_types:(0,o.default)(t)};this.$request("/worker/expected-job-types",a,"PUT").then((function(t){0==t.code&&(e.getSelectWorkTypes(),e.showCascade=!1)}))},makePhoneCall:function(){this.$store.dispatch("makePhoneCall")},getList:function(){var t=this;this.currentListType="near";var e=this.getNear?this.position.location.lat:"",a=this.getNear?this.position.location.lng:"",n="/guest/recommend-jobs?page=1&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude="+e+"&longitude="+a;this.$request(n).then((function(e){0==e.code&&(t.jobList=e.data.list,t.pagination=e.data.pagination,0==t.jobList.length&&(t.getNear?t.getTypeAll():t.getAll()))}))},getMore:function(){var e=this,a=this.getNear?this.position.location.lat:"",n=this.getNear?this.position.location.lng:"";if(this.currentPage<this.pagination.page_count){this.currentPage++;var i="/guest/recommend-jobs?page="+this.currentPage+"&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude="+a+"&longitude="+n;this.$request(i).then((function(t){0==t.code&&(e.jobList=e.jobList.concat(t.data.list),e.pagination=t.data.pagination)}))}else t.showToast({title:"已加载全部",icon:"none"})},getTypeAll:function(){var t=this;this.allCurrentPage=1,this.currentListType="allType";var e="/guest/recommend-jobs?page=1&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude=&longitude=";this.$request(e).then((function(e){0==e.code&&(t.allList=e.data.list,t.allPagination=e.data.pagination,0==t.allList.length&&t.getAll())}))},getTypeAllMore:function(){var e=this;if(this.allCurrentPage<this.allPagination.page_count){this.allCurrentPage++;var a="/guest/recommend-jobs?page="+this.allCurrentPage+"&keyword=&crowd_sourcing_job_type_code="+this.currentTab.value+"&latitude=&longitude=";this.$request(a).then((function(t){0==t.code&&(e.allList=e.allList.concat(t.data.list),e.allPagination=t.data.allPagination)}))}else t.showToast({title:"已加载全部",icon:"none"})},getAll:function(){var t=this;this.allCurrentPage=1,this.currentListType="all";this.$request("/guest/recommend-jobs?page=1&keyword=&crowd_sourcing_job_type_code=&latitude=&longitude=").then((function(e){0==e.code&&(t.allList=e.data.list,t.allPagination=e.data.pagination)}))},getAllMore:function(){var e=this;if(this.allCurrentPage<this.allPagination.page_count){this.allCurrentPage++;var a="/guest/recommend-jobs?page="+this.allCurrentPage+"&keyword=&crowd_sourcing_job_type_code=&latitude=&longitude=";this.$request(a).then((function(t){0==t.code&&(e.allList=e.allList.concat(t.data.list),e.allPagination=t.data.allPagination)}))}else t.showToast({title:"已加载全部",icon:"none"})},closeLogin:function(){this.showLogin=!1},getTabbarHeight:function(t){this.tabbarHeight=t},toDetail:function(e){t.navigateTo({url:"/worker/work_detail/work_detail?id="+e.id})},getPosition:function(){var t=this;return new Promise((function(e,a){t.$request("/guest/location").then((function(t){0==t.code&&e(t.data)}))}))},clickFengling:function(){this.showBroadcast=!0,this.canPlay=!0},closeMask:function(){this.showMask=!1}}};e.default=h}).call(this,a("df3c")["default"])}},[["30b1","common/runtime","common/vendor"]]]);