(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["employer/release/release"],{1335:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("2591");i(n("3240"));var o=i(n("edb8"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"260c":function(e,t,n){"use strict";n.r(t);var i=n("36e8"),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},"36e8":function(e,t,n){"use strict";(function(e,i){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("7eb4")),a=o(n("ee10")),s=o(n("7ca3")),l=n("8f59");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=getApp();function d(){var e=new Date,t=e.getFullYear(),n=f(e.getMonth()+1),i=f(e.getDate());return console.log(t+"-"+n+"-"+i),t+"-"+n+"-"+i}function f(e){return e<10&&(e="0"+e),e}var p={data:function(){return{ifSingle:1154==h.globalData.scene,pickerOpen:!1,id:"",typeValue:"CS100002",btnStatus2:!0,btnStatus:!0,current:0,currentTimeType:"",timeTitle:"日期选择",minDate:d(),orderInfo:{available_amount:"",need_pay:""},showMask:!1,imgUrl:h.globalData.baseImageUrl,marginTop:h.globalData.marginTop,tabMargin:h.globalData.tabMargin,releTitHeight:h.globalData.releTitHeight,subTabHeight:h.globalData.subTabHeight,releTopHead:h.globalData.releTopHead,btnBottom:h.globalData.btnBottom,textareaHeight:0,boxInHeight:0,currentStep:1,contHeight:0,hiring_count:"",employer_settlement_price:"",show:!1,employer_settlement_unit:"hourly",daily_work_hours:"",priceTypeList:[{name:"元/时",value:"hourly"},{name:"元/天",value:"daily"}],address:"",content:"",hiring_start_date:"",hiring_end_date:"",addrPlace:"请选择工作地址",workTypeData:[],job_type_code:"",info:{job_type_code:"",address:"",description:"",hiring_count:"",employer_settlement_price:"",employer_settlement_unit:"hourly",hiring_start_date:"",hiring_end_date:"",daily_work_hours:""},requireId:""}},computed:c({},(0,l.mapState)(["workType"])),onLoad:function(t){var n=this;return(0,a.default)(r.default.mark((function i(){return r.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n.isLogin()){i.next=3;break}return e.switchTab({url:"/pages/employer_index/employer_index"}),i.abrupt("return");case 3:if(n.id=t.id?t.id:"",!n.id){i.next=8;break}return i.next=7,n.getInfo();case 7:n.info=i.sent;case 8:n.formateData(),e.setNavigationBarColor({frontColor:"#000000",backgroundColor:"transparent"}),n.contHeight=h.globalData.systemHeight-n.marginTop-n.tabMargin,n.boxInHeight=n.contHeight-n.releTopHead-n.tabMargin-2*n.btnBottom-n.subTabHeight,n.textareaHeight=n.boxInHeight-7*n.releTitHeight-2*n.subTabHeight-1.5*n.tabMargin;case 13:case"end":return i.stop()}}),i)})))()},watch:{},methods:{getInfo:function(){var e=this,t=this;return new Promise((function(n){var i="/employer/jobRequirement/"+t.id+"/detail";e.$request(i).then((function(e){0==e.code&&n(e.data)}))}))},openKefu:function(){i.openCustomerServiceChat({extInfo:{url:"https://work.weixin.qq.com/kfid/kfc01b1c6e379607409"},corpId:"wwe3ced2e65390ad79",success:function(e){},fail:function(t){console.log(t),e.showToast({title:"请稍后重试",icon:"none"})}})},closeMask:function(){this.showMask=!1},clearType:function(){this.$refs.typePicker.clear()},radioChange:function(e){console.log(e),this.info.employer_settlement_unit=e.detail.value,"daily"==e.detail.value&&(this.info.daily_work_hours="")},handleConfirm:function(t){var n=this;"create_first"==t?(e.showLoading(),this.createRequire(t)):this.btnStatus2?(this.btnStatus2=!1,Number(this.orderInfo.available_amount)-Number(this.orderInfo.need_pay)<0?e.navigateTo({url:"/employer/recharge/recharge",success:function(){console.log("跳转成功")},fail:function(e){console.log("err:",e)},complete:function(){n.btnStatus2=!0}}):(this.closeMask(),this.createRequire(t))):e.showToast({title:"请勿重复点击",icon:"error"})},createRequire:function(t){var n=this;this.info.hiring_count=Number(this.info.hiring_count),this.info.daily_work_hours=Number(this.info.daily_work_hours),this.info.create_type=t,this.$request("/employer/createCrowdSourcingJob",this.info,"POST").then((function(t){n.btnStatus=!0,0==t.code&&(n.requireId=t.data.id,e.redirectTo({url:"/employer/release_success/release_success?id="+n.requireId,complete:function(){e.hideLoading()}}))}))},handleOpen:function(){this.pickerOpen=!0},handleClose:function(){this.pickerOpen=!1},veriNumber:function(t,n,i){if(console.log(n,i,"NaN"==String(Number(i))),"NaN"==String(Number(i)))e.showToast({title:"请输入数字",icon:"error"}),this.$set(this.info,t,"");else if(Number(i)<=0)e.showToast({title:"需大于0",icon:"error"}),this.$set(this.info,t,"");else if(console.log(n),"employer_settlement_price"==t||"daily_work_hours"==t){var o=String(i),r=o.split("."),a=0;r.length>1&&(a=r[1].length),a>1?(e.showToast({title:"最多1位小数",icon:"error"}),this.$set(this.info,t,Number(i).toFixed(1))):this.$set(this.info,t,Number(i))}},formateData:function(){this.workTypeData=this.workType.map((function(e){if(e.children&&e.children.length>0){var t=e.children.map((function(e){return c(c({},e),{},{value:e.value,text:e.label,children:e.children,label:void 0})}));return c(c({},e),{},{value:e.value,text:e.label,children:t,label:void 0})}return c(c({},e),{},{value:e.value,text:e.label,children:e.children,label:void 0})})),this.workTypeData=this.workTypeData.slice(1),console.log("workTypeData：",this.workTypeData)},getDaysBetweenDates:function(e,t){var n=new Date(e),i=new Date(t),o=Math.abs(i.getTime()-n.getTime()),r=Math.ceil(o/864e5);return r+1},veriDate:function(t,n){var i=new Date(t),o=new Date(n),r=o.getTime()-i.getTime();return!(r<0)||(e.showModal({title:"用工开始日期不能晚于结束日期"}),!1)},release:function(){for(var t in this.info)if(!this.info[t]){if("daily_work_hours"!=t)return void e.showModal({title:"内容填写不完整，请仔细核对。",showCancel:!1});if("daily"!=this.info.employer_settlement_unit)return void e.showModal({title:"内容填写不完整，请仔细核对。",showCancel:!1})}this.veriDate(this.info.hiring_start_date,this.info.hiring_end_date)&&(this.btnStatus?(this.btnStatus=!1,this.checkBalance()):e.showToast({title:"请勿重复点击",icon:"error"}))},checkBalance:function(){var e=this,t={hiring_count:Number(this.info.hiring_count),employer_settlement_price:this.info.employer_settlement_price,employer_settlement_unit:this.info.employer_settlement_unit,hiring_start_date:this.info.hiring_start_date,hiring_end_date:this.info.hiring_end_date,daily_work_hours:Number(this.info.daily_work_hours)};this.$request("/employer/preCheckBalance",t,"POST").then((function(t){e.btnStatus=!0,0==t.code&&(e.showMask=!0,e.orderInfo=t.data)}))},resetData:function(){this.info={job_type_code:"",address:"",description:"",hiring_count:"",employer_settlement_price:"",employer_settlement_unit:"",hiring_start_date:"",hiring_end_date:"",daily_work_hours:""}},changeWorkType:function(e){console.log(e),console.log("job_type_code：",this.info.job_type_code)},confirmTime:function(e){this.show=!1,this.pickerOpen=!1,"hiring_end_date"==this.currentTimeType?this.info.hiring_end_date=e[0]:this.info.hiring_start_date=e[0]},changeStep:function(t){2!=t||this.info.job_type_code&&this.info.address&&this.info.description?this.currentStep=t:e.showToast({title:"内容填写不完整",icon:"error"})},clear:function(e){this.$set(this.info,e,"")},openTime:function(e){this.show=!0,this.pickerOpen=!0,this.currentTimeType=e,this.timeTitle="hiring_end_date"==e?"结束日期":"开始日期"},closeTime:function(){this.show=!1,this.pickerOpen=!1},openMap:function(){var t=this;e.chooseLocation({success:function(e){console.log(e),t.info.address=e.address,console.log("address：",t.address),console.log("位置名称："+e.name),console.log("详细地址："+e.address),console.log("纬度："+e.latitude),console.log("经度："+e.longitude)},fail:function(e){console.log(e)}})}}};t.default=p}).call(this,n("df3c")["default"],n("3223")["default"])},"619b":function(e,t,n){"use strict";var i=n("6785"),o=n.n(i);o.a},6785:function(e,t,n){},"9ac9":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uNavbar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(n.bind(null,"8e7b"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"228d"))},uniDataPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker")]).then(n.bind(null,"5eda"))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,"c564"))},uCalendar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-calendar/u-calendar")]).then(n.bind(null,"2a3a"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.ifSingle?null:{height:e.subTabHeight+"px"}),i=e.ifSingle?null:{height:e.subTabHeight+"px"},o=!e.ifSingle&&e.info.hiring_start_date&&e.info.hiring_end_date?e.getDaysBetweenDates(e.info.hiring_start_date,e.info.hiring_end_date):null,r=e.ifSingle?null:{height:e.subTabHeight+"px"},a=!e.ifSingle&&e.showMask?Number(e.orderInfo.available_amount):null,s=!e.ifSingle&&e.showMask?Number(e.orderInfo.need_pay):null,l=!e.ifSingle&&e.showMask?Number(e.orderInfo.available_amount):null,u=!e.ifSingle&&e.showMask?Number(e.orderInfo.need_pay):null;e.$mp.data=Object.assign({},{$root:{a0:n,a1:i,m0:o,a2:r,m1:a,m2:s,m3:l,m4:u}})},r=[]},edb8:function(e,t,n){"use strict";n.r(t);var i=n("9ac9"),o=n("260c");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("619b");var a=n("828b"),s=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports}},[["1335","common/runtime","common/vendor"]]]);