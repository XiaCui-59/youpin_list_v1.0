(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/work/work"],{"400d":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("7eb4")),o=i(n("ee10")),r=i(n("0b3f")),s=getApp(),u={data:function(){return{showAddBase:!1,imgUrl:s.globalData.baseImageUrl,currentTab:{value:"entry-signing-requests",text:"进行中"},showMask:!1,refreshStatus:!0,isPulling:!1,pageName:"灵动优聘",marginTop:s.globalData.marginTop,tabMargin:s.globalData.tabMargin,subTabHeight:s.globalData.subTabHeight,status:r.default.workerStatus,periodList:r.default.periodList,tabs:[{value:"entry-signing-requests",text:"进行中"},{value:"wait-signing-requests",text:"已报名"},{value:"end-signing-requests",text:"已结束"}],scrollHeight:0,boxTop:0,headerHeight:s.globalData.highTopHeight,currentPage:1,list:[],pagination:{},tabbarHeight:0,loginStatus:!1,bannerHeight:s.globalData.bannerHeight,showLogin:!1,currentPro:{}}},components:{tabbar:function(){n.e("components/tabbar").then(function(){return resolve(n("0183"))}.bind(null,n)).catch(n.oe)},customHeader:function(){n.e("components/custom_header").then(function(){return resolve(n("eb6c"))}.bind(null,n)).catch(n.oe)},addBase:function(){n.e("components/add_base_info").then(function(){return resolve(n("a59d"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){var t=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getOpenId(),console.log(t.tabbarHeight,"tabb"),t.boxTop=t.marginTop+2*t.tabMargin+t.bannerHeight,t.scrollHeight=s.globalData.systemHeight-t.marginTop-2*t.tabMargin-t.tabbarHeight-t.bannerHeight,console.log(t.isLogin(),"isLogin"),t.isLogin()&&(t.loginStatus=!0);case 6:case"end":return e.stop()}}),e)})))()},onShow:function(){this.currentPage=1,this.getList()},methods:{getOpenId:function(){var e=this;t.login({success:function(n){if("login:ok"==n.errMsg){var i={code:n.code};e.$request("",i,"POST").then((function(e){0==e.code&&t.setStorage({key:"openid",data:e.data.open_id})}))}},fail:function(t){console.log(t,"接口调用失败")}})},closeBase:function(){this.showAddBase=!1,t.showToast({title:"报名成功",duration:3e3})},refreshData:function(){var t=this;this.isPulling||(this.isPulling=!0,this.refreshStatus=!0,this.currentPage=1,this.getList(),setTimeout((function(){t.refreshStatus=!1,t.isPulling=!1}),1e3))},closeLogin:function(){this.showLogin=!1},signIn:function(e){var n=this;n.currentPro=e,t.showModal({title:"正在报名",content:"是否确认报名项目："+e.name+"？",success:function(t){t.confirm&&(n.isLogin()?n.sureSign():n.showLogin=!0)}})},sureSign:function(){var e=this,n="/worker/accept/project/"+this.currentPro.id;this.$request(n,{},"POST").then(function(){var n=(0,o.default)(a.default.mark((function n(i){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=i.code){n.next=6;break}return e.closeLogin(),n.next=4,e.getUsrInfo();case 4:o=n.sent,"unknown"==o.gender?e.showAddBase=!0:t.showToast({title:"报名成功",duration:3e3});case 6:e.getList();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},getTabbarHeight:function(t){this.tabbarHeight=t},changeMainTab:function(t){this.currentMainTab=t},changeTab:function(t){this.currentTab.value=t.value,this.currentTab.text=t.text,this.list=[],this.getList()},toDetail:function(e){t.navigateTo({url:"/subpkg/project_detail/project_detail?id="+e})},getMore:function(){var t=this;if(this.isLogin()){var e="/worker/recommend/project?page="+this.currentPage;this.$request(e).then((function(e){0==e.code&&(t.list=t.list.concat(e.data.list),t.pagination=e.data.pagination)}))}else{var n="/common/recommend/project?page="+this.currentPage;this.$request(n).then((function(e){0==e.code&&(t.list=t.list.concat(e.data.list),t.pagination=e.data.pagination)}))}},getList:function(){var t=this;if(this.isLogin()){this.$request("/worker/recommend/project?page=1").then((function(e){0==e.code&&(t.list=e.data.list,t.pagination=e.data.pagination)}))}else{this.$request("/common/recommend/project?page=1").then((function(e){0==e.code&&(t.list=e.data.list,t.pagination=e.data.pagination)}))}},lower:function(){this.list.length<this.pagination.totalCount?(this.currentPage++,this.getMore()):this.list.length>=this.pagination.totalCount&&t.showToast({title:"已经到底啦~",icon:"none",duration:2e3})}}};e.default=u}).call(this,n("8fed")["default"])},"86cd":function(t,e,n){"use strict";var i=n("bbff"),a=n.n(i);a.a},8921:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("417d");i(n("3240"));var a=i(n("93e2"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("8fed")["default"],n("8fed")["createPage"])},"93e2":function(t,e,n){"use strict";n.r(e);var i=n("d7dd"),a=n("e497");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("86cd");var r=n("828b"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"000505cc",null,!1,i["a"],void 0);e["default"]=s.exports},bbff:function(t,e,n){},d7dd:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.list,(function(e,n){var i=t.__get_orig(e),a=t.periodList.filter((function(t){return t.value==e.worker_salary_type}));return{$orig:i,g0:a}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},e497:function(t,e,n){"use strict";n.r(e);var i=n("400d"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a}},[["8921","common/runtime","common/vendor"]]]);